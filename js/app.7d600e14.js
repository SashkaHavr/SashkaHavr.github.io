(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},s={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"00fd":function(t,e,n){"use strict";n("b747")},"1dbb":function(t,e,n){},"762f":function(t,e,n){"use strict";n("1dbb")},b747:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23");function s(t,e,n,s,a,o){var r=Object(i["C"])("DesktopMain");return Object(i["u"])(),Object(i["e"])(r)}var a={class:"app"},o={key:0,class:"sim-time-picker-container"},r={class:"sim-time-picker-overlay"},c={class:"title"},l=["checked"],u=Object(i["h"])("label",{for:"sim-mode-checkbox"},"Simulationsmodus",-1),d=Object(i["h"])("i",{class:"icon"},"close",-1),p=[d];function h(t,e,n,s,d,h){var m=Object(i["C"])("Map"),b=Object(i["C"])("LeftMenu"),O=Object(i["C"])("InputField"),v=Object(i["C"])("Calendar"),g=Object(i["C"])("TimeInputField");return Object(i["u"])(),Object(i["g"])("div",a,[Object(i["j"])(m,{onOpenSimWindow:e[0]||(e[0]=function(e){return t.simWindowOpened=!t.simWindowOpened}),isSimulationEnabled:t.isSimulationEnabled},null,8,["isSimulationEnabled"]),Object(i["j"])(b,{onSearchHidden:e[1]||(e[1]=function(e){return t.searchFieldHidden=e})}),Object(i["h"])("div",{id:"station-search",class:Object(i["p"])(["",t.searchFieldHidden?"overlay-hidden":""])},[Object(i["j"])(O,{iconType:"place",showLabel:!1,showAutocomplete:!0,isTimeCalendarField:!1,onAutocompleteElementClicked:t.goToTimetable},null,8,["onAutocompleteElementClicked"])],2),t.simWindowOpened?(Object(i["u"])(),Object(i["g"])("div",o,[Object(i["h"])("div",r,[Object(i["h"])("div",c,[Object(i["h"])("input",{id:"sim-mode-checkbox",type:"checkbox",name:"sim-mode-checkbox",onClick:e[2]||(e[2]=function(e){return t.startDisableSimulation()}),checked:t.isSimulationEnabled},null,8,l),u]),Object(i["j"])(v,{class:Object(i["p"])([t.isSimulationEnabled?"date":"date disabled"]),onDateChanged:t.changeDate},null,8,["class","onDateChanged"]),Object(i["j"])(g,{class:Object(i["p"])([t.isSimulationEnabled?"time":"time disabled"]),onTimeChanged:t.changeTime},null,8,["class","onTimeChanged"]),Object(i["h"])("button",{class:"close",onMousedown:e[3]||(e[3]=function(e){return t.simWindowOpened=!1})},p,32)])])):Object(i["f"])("",!0)])}var m={class:"overlay"},b={id:"overlay-content"},O={id:"sub-overlay-content"},v=Object(i["h"])("i",{class:"icon"},"close",-1),g=[v],j={class:"overlay-tabs"},f=Object(i["h"])("i",{class:"icon"},"arrow_drop_down",-1),S=[f],y=Object(i["h"])("i",{class:"icon"},"train",-1),T=[y];function D(t,e,n,s,a,o){var r=Object(i["C"])("RouterView");return Object(i["u"])(),Object(i["g"])("div",{class:Object(i["p"])(["overlay-container",t.isOverlayHidden?"hidden":""])},[Object(i["h"])("div",m,[Object(i["h"])("div",b,[Object(i["j"])(r,{name:"overlay"},{default:Object(i["N"])((function(t){var e=t.Component;return[(Object(i["u"])(),Object(i["e"])(i["b"],{include:"ConnectionSearch"},[(Object(i["u"])(),Object(i["e"])(Object(i["D"])(e)))],1024))]})),_:1})]),Object(i["h"])("div",{class:Object(i["p"])(["sub-overlay",t.isSubOverlayHidden?"hidden":""])},[Object(i["h"])("div",O,[Object(i["j"])(r,{name:"subOverlay"},{default:Object(i["N"])((function(t){var e=t.Component;return[(Object(i["u"])(),Object(i["e"])(i["b"],{include:"TrainSearch"},[(Object(i["u"])(),Object(i["e"])(Object(i["D"])(e)))],1024))]})),_:1})]),Object(i["h"])("div",{class:"sub-overlay-close",onClick:e[0]||(e[0]=function(e){return t.$router.push("/")})},g)],2)]),Object(i["h"])("div",j,[Object(i["h"])("button",{class:"overlay-toggle",onClick:e[1]||(e[1]=function(e){return t.isOverlayHidden=!t.isOverlayHidden})},S),Object(i["h"])("button",{class:Object(i["p"])(["trip-search-toggle",t.isTrainSubOverlayOpened?"enabled":""]),onClick:e[2]||(e[2]=function(){return t.openCloseTrainSearch&&t.openCloseTrainSearch.apply(t,arguments)})},T,2)])],2)}n("b0c0"),n("caad"),n("2532"),n("d3b7"),n("25f0"),n("25eb"),n("a9e3");var k=n("6c02"),w=(n("fb6a"),{id:"search"}),C={class:"main-gutter from-gutter"},$=Object(i["h"])("i",{class:"icon"},"directions_walk",-1),F=[$],I=Object(i["h"])("i",{class:"icon"},"directions_bike",-1),x=[I],M=Object(i["h"])("i",{class:"icon"},"directions_car",-1),_=[M],L={class:"swap-locations-btn",tabindex:"-1"},E={class:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select"},N=Object(i["h"])("i",{class:"icon"},"swap_vert",-1),R={class:"main-gutter to-gutter"},B=Object(i["h"])("i",{class:"icon"},"directions_walk",-1),P=[B],V=Object(i["h"])("i",{class:"icon"},"directions_bike",-1),H=[V],A=Object(i["h"])("i",{class:"icon"},"directions_car",-1),G=[A],q={class:"main-gutter time-options-gutter"},W=Object(i["h"])("input",{type:"radio",id:"search-forward",name:"time-option",checked:""},null,-1),U=Object(i["h"])("input",{type:"radio",id:"search-backward",name:"time-option"},null,-1),z={class:"mode-picker-editor"},Y={class:"header"},K=Object(i["h"])("i",{class:"icon"},"close",-1),X=[K],J={class:"title"},Z={class:"content"},Q={class:"option"},tt={class:"label"},et={class:"profile-picker"},nt={value:"default"},it={value:"accessibility1"},st={value:"wheelchair"},at={value:"elevation"},ot={class:"option"},rt={id:"connections"},ct={key:1,class:"connections"},lt={class:"extend-search-interval search-before"},ut={class:"connection-list"},dt={class:"date-header divider"},pt=["onClick"],ht={class:"connections-info-gutter connection-times"},mt={class:"connection-departure"},bt={class:"connection-arrival"},Ot={class:"connections-info-gutter connection-duration"},vt={class:"connection-duration-inner"},gt={ref:"linesDiv",class:"coonections-line-gutter connection-trains"},jt=["width","viewBox"],ft={class:"lineG"},St={class:"destination"},yt=["cx"],Tt={class:"stations"},Dt={class:"departure"},kt={class:"station"},wt={class:"time"},Ct={class:"arrival"},$t={class:"station"},Ft={class:"time"},It={class:"transport-name"},xt={key:0,class:"date-header divider"},Mt=Object(i["h"])("div",{class:"divider footer"},null,-1),_t={class:"extend-search-interval search-after"},Lt={key:2,class:"main-error"},Et={class:""},Nt={class:"schedule-range"},Rt={key:3,class:"no-results"},Bt={class:"schedule-range"};function Pt(t,e,n,s,a,o){var r=Object(i["C"])("InputField"),c=Object(i["C"])("Calendar"),l=Object(i["C"])("TimeInputField"),u=Object(i["C"])("Slider"),d=Object(i["C"])("BlockWithCheckbox"),p=Object(i["C"])("LoadingBar"),h=Object(i["C"])("TransportLine");return Object(i["u"])(),Object(i["g"])(i["a"],null,[Object(i["h"])("div",w,[Object(i["h"])("div",C,[Object(i["j"])(r,{labelName:t.$t.start,iconType:"place",isTimeCalendarField:!1,showLabel:!0,initInputText:t.start,onInputChanged:t.setStartInput,showAutocomplete:!0,onAutocompleteElementClicked:t.startObjectClicked,tabIndex:1},null,8,["labelName","initInputText","onInputChanged","onAutocompleteElementClicked"]),Object(i["h"])("button",{class:"mode-picker-btn",onClick:e[0]||(e[0]=function(){return t.optinsButton1Click&&t.optinsButton1Click.apply(t,arguments)}),tabindex:"-1"},[Object(i["h"])("div",{class:Object(i["p"])(["mode",t.firstOptions.foot?"enabled":""])},F,2),Object(i["h"])("div",{class:Object(i["p"])(["mode",t.firstOptions.bicycle?"enabled":""])},x,2),Object(i["h"])("div",{class:Object(i["p"])(["mode",t.firstOptions.car?"enabled":""])},_,2)]),Object(i["h"])("button",L,[Object(i["h"])("label",E,[Object(i["h"])("input",{type:"checkbox",onClick:e[1]||(e[1]=function(){return t.swapStartDest&&t.swapStartDest.apply(t,arguments)})}),N])])]),Object(i["j"])(c,{class:"main-gutter calendar-gutter",onDateChanged:t.dateChanged},null,8,["onDateChanged"]),Object(i["h"])("div",R,[Object(i["j"])(r,{labelName:t.$t.destination,iconType:"place",showLabel:!0,initInputText:t.destination,onInputChanged:t.setDestInput,showAutocomplete:!0,onAutocompleteElementClicked:t.destinationObjectClicked,tabIndex:2},null,8,["labelName","initInputText","onInputChanged","onAutocompleteElementClicked"]),Object(i["h"])("button",{class:"mode-picker-btn",onClick:e[2]||(e[2]=function(){return t.optinsButton2Click&&t.optinsButton2Click.apply(t,arguments)}),tabindex:"-1"},[Object(i["h"])("div",{class:Object(i["p"])(["mode",t.secondOptions.foot?"enabled":""])},P,2),Object(i["h"])("div",{class:Object(i["p"])(["mode",t.secondOptions.bicycle?"enabled":""])},H,2),Object(i["h"])("div",{class:Object(i["p"])(["mode",t.secondOptions.car?"enabled":""])},G,2)])]),Object(i["j"])(l,{onTimeChanged:t.timeChanged,class:"main-gutter time-gutter"},null,8,["onTimeChanged"]),Object(i["h"])("div",q,[Object(i["h"])("div",null,[W,Object(i["h"])("label",{for:"search-forward",onClick:e[3]||(e[3]=function(e){return t.isDeparture=!0,t.sendRequest()})},Object(i["F"])(t.$t.departure),1)]),Object(i["h"])("div",null,[U,Object(i["h"])("label",{for:"search-backward",onClick:e[4]||(e[4]=function(e){return t.isDeparture=!1,t.sendRequest()})},Object(i["F"])(t.$t.arrival),1)])]),Object(i["O"])(Object(i["h"])("div",z,[Object(i["h"])("div",Y,[Object(i["h"])("button",{class:"sub-overlay-close",onClick:e[5]||(e[5]=function(){return t.optionsWindowCloseClick&&t.optionsWindowCloseClick.apply(t,arguments)})},X),Object(i["h"])("div",J,Object(i["F"])(t.pressedOptions==t.firstOptions?t.$t.startTransports:t.$t.destinationTransports),1)]),Object(i["h"])("div",Z,[Object(i["j"])(d,{title:t.$t.walk,isChecked:t.pressedOptions.foot,onIsCheckedChanged:e[8]||(e[8]=function(e){return t.pressedOptions.foot=e})},{default:Object(i["N"])((function(){return[Object(i["h"])("div",Q,[Object(i["h"])("div",tt,Object(i["F"])(t.$t.profile),1),Object(i["h"])("div",et,[Object(i["O"])(Object(i["h"])("select",{class:"select","onUpdate:modelValue":e[6]||(e[6]=function(e){return t.pressedOptions.footProfile=e})},[Object(i["h"])("option",nt,Object(i["F"])(t.$t.searchProfile_default),1),Object(i["h"])("option",it,Object(i["F"])(t.$t.searchProfile_accessibility),1),Object(i["h"])("option",st,Object(i["F"])(t.$t.searchProfile_wheelchair),1),Object(i["h"])("option",at,Object(i["F"])(t.$t.searchProfile_elevation),1)],512),[[i["J"],t.pressedOptions.footProfile]])])]),Object(i["j"])(u,{initSliderValue:t.pressedOptions.footDuration,onSliderValueChanged:e[7]||(e[7]=function(e){return t.pressedOptions.footDuration=e})},null,8,["initSliderValue"])]})),_:1},8,["title","isChecked"]),Object(i["j"])(d,{title:t.$t.bike,isChecked:t.pressedOptions.bicycle,onIsCheckedChanged:e[10]||(e[10]=function(e){return t.pressedOptions.bicycle=e})},{default:Object(i["N"])((function(){return[Object(i["j"])(u,{initSliderValue:t.pressedOptions.bicycleDuration,onSliderValueChanged:e[9]||(e[9]=function(e){return t.pressedOptions.bicycleDuration=e})},null,8,["initSliderValue"])]})),_:1},8,["title","isChecked"]),Object(i["j"])(d,{title:t.$t.car,isChecked:t.pressedOptions.car,onIsCheckedChanged:e[13]||(e[13]=function(e){return t.pressedOptions.car=e})},{default:Object(i["N"])((function(){return[Object(i["j"])(u,{initSliderValue:t.pressedOptions.carDuration,onSliderValueChanged:e[11]||(e[11]=function(e){return t.pressedOptions.carDuration=e})},null,8,["initSliderValue"]),Object(i["h"])("div",ot,[Object(i["h"])("label",null,[Object(i["O"])(Object(i["h"])("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=function(e){return t.pressedOptions.carParking=e})},null,512),[[i["H"],t.pressedOptions.carParking]]),Object(i["i"])(Object(i["F"])(t.$t.useParking),1)])])]})),_:1},8,["title","isChecked"])])],512),[[i["L"],t.isOptionsWindowOpened]])]),Object(i["h"])("div",rt,[t.loadingStates.content===t.LoadingState.Loading?(Object(i["u"])(),Object(i["e"])(p,{key:0,isButton:!1})):t.loadingStates.content===t.LoadingState.Loaded?(Object(i["u"])(),Object(i["g"])("div",ct,[Object(i["h"])("div",lt,[t.loadingStates.upperButton===t.LoadingState.Loaded?Object(i["O"])((Object(i["u"])(),Object(i["g"])("button",{key:0,onClick:e[14]||(e[14]=function(e){return t.sendRequest(t.TimeGap.Earlier)})},Object(i["F"])(t.$t.earlier),513)),[[i["L"],!t.isUpperEnd]]):(Object(i["u"])(),Object(i["e"])(p,{key:1,isButton:!0}))]),Object(i["h"])("div",ut,[Object(i["h"])("div",dt,[Object(i["h"])("span",null,Object(i["F"])(t.$ds.getDateString(1e3*t.connections[0].stops[0].departure.time)),1)]),(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.connections,(function(e,n){return Object(i["u"])(),Object(i["g"])("div",{class:Object(i["p"])(["connection",t.initialConnections.includes(e)?"":"new",t.mapHoverOptions?t.mapHoverOptions.connectionIds.includes(n)?"highlighted":"faded":""]),key:e,onClick:function(e){return t.connectionClicked(n)}},[Object(i["h"])("div",null,[Object(i["h"])("div",ht,[Object(i["h"])("div",mt,Object(i["F"])(t.$ds.getTimeString(1e3*e.stops[0].departure.time)),1),Object(i["h"])("div",bt,Object(i["F"])(t.$ds.getTimeString(1e3*e.stops[e.stops.length-1].arrival.time)),1)]),Object(i["h"])("div",Ot,[Object(i["h"])("div",vt,Object(i["F"])(t.getReadableDuration(e.stops[0].departure.time,e.stops[e.stops.length-1].arrival.time,t.$ts)),1)]),Object(i["h"])("div",gt,[Object(i["h"])("div",{class:Object(i["p"])(["transport-graph",t.mapHoverOptions?"highlighting":""])},[(Object(i["u"])(),Object(i["g"])("svg",{width:t.linesDivWidth,height:"40",viewBox:"0 0 ".concat(t.linesDivWidth," 40")},[Object(i["h"])("g",ft,[(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.fillMovesWithLineData(t.getNonEmptyTransports(e.transports),e),(function(s){return Object(i["u"])(),Object(i["e"])(h,{key:s.move.move.range,move:s.move,lineStart:s.lineStart,lineEnd:s.lineEnd,mapHoverOptions:t.mapHoverOptions,connectionIndex:n,stops:e.stops.slice(s.originalMove.move.range.from,s.originalMove.move.range.to+1),onMouseEnter:function(e){return t.showTooltip(e,n)},onMouseLeave:function(e){return t.isTooltipVisible[n]=!1}},null,8,["move","lineStart","lineEnd","mapHoverOptions","connectionIndex","stops","onMouseEnter","onMouseLeave"])})),128))]),Object(i["h"])("g",St,[Object(i["h"])("circle",{cx:t.linesDivWidth-6,cy:"12",r:"6"},null,8,yt)])],8,jt)),Object(i["h"])("div",{class:Object(i["p"])(["tooltip",t.isTooltipVisible[n]?"visible":""]),style:Object(i["q"])("position: absolute; left: ".concat(t.transportTooltipInfo[n].x,"px; top: 23px"))},[Object(i["h"])("div",Tt,[Object(i["h"])("div",Dt,[Object(i["h"])("span",kt,Object(i["F"])(t.transportTooltipInfo[n].start),1),Object(i["h"])("span",wt,Object(i["F"])(t.transportTooltipInfo[n].departure),1)]),Object(i["h"])("div",Ct,[Object(i["h"])("span",$t,Object(i["F"])(t.transportTooltipInfo[n].destination),1),Object(i["h"])("span",Ft,Object(i["F"])(t.transportTooltipInfo[n].arrival),1)])]),Object(i["h"])("div",It,[Object(i["h"])("span",null,Object(i["F"])(t.transportTooltipInfo[n].transportName),1)])],6)],2)],512)]),t.separators.includes(n+1)?(Object(i["u"])(),Object(i["g"])("div",xt,[Object(i["h"])("span",null,Object(i["F"])(t.$ds.getDateString(1e3*t.connections[n+1].stops[0].departure.time)),1)])):Object(i["f"])("",!0)],10,pt)})),128))]),Mt,Object(i["h"])("div",_t,[t.loadingStates.lowerButton===t.LoadingState.Loaded?Object(i["O"])((Object(i["u"])(),Object(i["g"])("button",{key:0,onClick:e[15]||(e[15]=function(e){return t.sendRequest(t.TimeGap.Later)})},Object(i["F"])(t.$t.later),513)),[[i["L"],!t.isBottomEnd]]):(Object(i["u"])(),Object(i["e"])(p,{key:1,isButton:!0}))])])):t.loadingStates.content===t.LoadingState.Error?(Object(i["u"])(),Object(i["g"])("div",Lt,[Object(i["h"])("div",Et,Object(i["F"])(t.$t.noInTimetable),1),Object(i["h"])("div",Nt,Object(i["F"])(t.$ts.formatTranslate("information",t.$ds.getDateString(1e3*t.$ds.intervalFromServer.begin),t.$ds.getDateString(1e3*t.$ds.intervalFromServer.end))),1)])):t.loadingStates.content===t.LoadingState.NothingToShow?(Object(i["u"])(),Object(i["g"])("div",Rt,[Object(i["h"])("div",Bt,Object(i["F"])(t.$ts.formatTranslate("information",t.$ds.getDateString(1e3*t.$ds.intervalFromServer.begin),t.$ds.getDateString(1e3*t.$ds.intervalFromServer.end))),1)])):Object(i["f"])("",!0)])],64)}var Vt=n("2909"),Ht=n("5530"),At=(n("99af"),n("d81d"),n("4de4"),{key:0,class:"label"}),Gt={class:"gb-input-icon"},qt={class:"icon"},Wt=["inputmode","tabindex"],Ut={key:0,class:"gb-input-widget"},zt={class:"day-buttons"},Yt=Object(i["h"])("i",{class:"icon"},"chevron_left",-1),Kt=[Yt],Xt=Object(i["h"])("i",{class:"icon"},"chevron_right",-1),Jt=[Xt];function Zt(t,e,n,s,a,o){var r=Object(i["C"])("StationAddressAutocomplete");return Object(i["u"])(),Object(i["g"])("div",null,[Object(i["h"])("div",null,[t.showLabel?(Object(i["u"])(),Object(i["g"])("div",At,Object(i["F"])(t.labelName),1)):Object(i["f"])("",!0),Object(i["h"])("div",{class:Object(i["p"])(["gb-input-group",t.isFocused?"gb-input-group-selected":""])},[Object(i["h"])("div",Gt,[Object(i["h"])("i",qt,Object(i["F"])(t.iconType),1)]),Object(i["O"])(Object(i["h"])("input",{inputmode:t.isTimeCalendarField?"numeric":"",class:"gb-input",tabindex:t.tabIndex,onInput:e[0]||(e[0]=function(){return t.onInput&&t.onInput.apply(t,arguments)}),"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.inputValue=e}),onFocus:e[2]||(e[2]=function(e){return t.$emit("focus",e),t.onInput,t.isFocused=!0}),onBlur:e[3]||(e[3]=function(){return t.onBlur&&t.onBlur.apply(t,arguments)}),onKeydown:e[4]||(e[4]=function(e){return t.$emit("keydown",e)}),onMouseup:e[5]||(e[5]=function(e){return t.$emit("mouseup",e)})},null,40,Wt),[[i["K"],t.inputValue]]),t.showArrows?(Object(i["u"])(),Object(i["g"])("div",Ut,[Object(i["h"])("div",zt,[Object(i["h"])("button",{onMouseup:e[6]||(e[6]=function(e){return t.$emit("decreaseClick")}),onMousedown:e[7]||(e[7]=function(e){return t.$emit("decreaseMouseDown")}),class:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select"},Kt,32),Object(i["h"])("button",{onMouseup:e[8]||(e[8]=function(e){return t.$emit("increaseClick")}),onMousedown:e[9]||(e[9]=function(e){return t.$emit("increaseMouseDown")}),class:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select"},Jt,32)])])):Object(i["f"])("",!0)],2)]),t.showAutocomplete?(Object(i["u"])(),Object(i["e"])(r,{key:0,input:t.inputValue,showList:t.showStationAddress,onElementClicked:t.onElementClicked},null,8,["input","showList","onElementClicked"])):Object(i["f"])("",!0)])}n("ac1f"),n("1276");var Qt={class:"paper"},te={class:"proposals"},ee=["onMouseenter","title","onMousedown"],ne=Object(i["h"])("i",{class:"icon"},"train",-1),ie={class:"station"},se=["onMouseenter","title","onMousedown"],ae=Object(i["h"])("i",{class:"icon"},"place",-1),oe={class:"address-name"},re={class:"address-region"};function ce(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("div",null,[Object(i["O"])(Object(i["h"])("div",Qt,[Object(i["h"])("ul",te,[(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.stationGuesses,(function(e,n){return Object(i["u"])(),Object(i["g"])("li",{onMouseenter:function(e){return t.focusElement(n)},class:Object(i["p"])(["",e.isMouseOver?"selected":""]),key:e.stationGuess.id,title:e.stationGuess.name,onMousedown:function(n){return t.$emit("elementClicked",e.stationGuess)}},[ne,Object(i["h"])("span",ie,Object(i["F"])(e.stationGuess.name),1)],42,ee)})),128)),(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.addressGuesses,(function(e,n){return Object(i["u"])(),Object(i["g"])("li",{onMouseenter:function(e){return t.focusElement(n+t.stationGuesses.length)},class:Object(i["p"])(["",e.isMouseOver?"selected":""]),key:e.addressGuess.id,title:e.addressGuess.name+", "+e.region.split(", ")[0],onMousedown:function(n){return t.$emit("elementClicked",e.addressGuess)}},[ae,Object(i["h"])("span",oe,Object(i["F"])(e.addressGuess.name),1),Object(i["h"])("span",re,Object(i["F"])(e.region),1)],42,se)})),128))])],512),[[i["L"],(t.stationGuesses.length>0||t.addressGuesses.length>0)&&t.showList]])])}var le=n("b85c"),ue=(n("a434"),Object(i["k"])({name:"StationAddressAutocomplete",props:{input:String,showList:Boolean},emits:["elementClicked"],data:function(){return{isMouseOver:!1,stationGuesses:[],addressGuesses:[],currentFocused:0}},watch:{input:function(t){var e=this;this.$postService.getStationGuessResponse(t,6).then((function(t){e.stationGuesses=t.guesses.map((function(t){return{stationGuess:t,isMouseOver:!1}})),e.focusElement(0)})),this.$postService.getAddressGuessResponse(t).then((function(t){e.addressGuesses=t.guesses.splice(0,9).map((function(t){return{addressGuess:t,region:e.getRegion(t),isMouseOver:!1}})),e.focusElement(0)}))},showList:function(){this.showList?window.addEventListener("keydown",this.keyDown):window.removeEventListener("keydown",this.keyDown)}},methods:{getRegion:function(t){var e=t.regions.filter((function(t){return 6===t.admin_level})),n="";0!==e.length&&(n+=e[0].name);var i=t.regions.filter((function(t){return 4===t.admin_level}));0!==i.length&&0===e.length&&(n+=i[0].name);var s=t.regions.filter((function(t){return 2===t.admin_level}));return 0!==s.length&&(""!==n&&(n+=", "),n+=s[0].name),n},keyDown:function(t){if(-1!==this.currentFocused)switch(t.key){case"ArrowUp":this.currentFocused>0?this.focusElement(this.currentFocused-1):this.focusElement(this.stationGuesses.length+this.addressGuesses.length-1);break;case"ArrowDown":this.currentFocused<this.stationGuesses.length+this.addressGuesses.length-1?this.focusElement(this.currentFocused+1):this.focusElement(0);break;case"Enter":var e=this.getElement(this.currentFocused);e&&this.$emit("elementClicked","addressGuess"in e?e.addressGuess:e.stationGuess);break}},focusElement:function(t){var e,n=Object(le["a"])(this.stationGuesses);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.isMouseOver=!1}}catch(c){n.e(c)}finally{n.f()}var s,a=Object(le["a"])(this.addressGuesses);try{for(a.s();!(s=a.n()).done;){var o=s.value;o.isMouseOver=!1}}catch(c){a.e(c)}finally{a.f()}var r=this.getElement(t);r?(r.isMouseOver=!0,this.currentFocused=t):this.currentFocused=-1},getElement:function(t){return t>this.stationGuesses.length-1&&this.addressGuesses.length>0?(t-=this.stationGuesses.length,this.addressGuesses[t]):this.stationGuesses.length>0?this.stationGuesses[t]:void 0}}})),de=n("6b0d"),pe=n.n(de);const he=pe()(ue,[["render",ce]]);var me=he,be=Object(i["k"])({name:"InputField",components:{StationAddressAutocomplete:me},props:{labelName:String,iconType:String,showLabel:Boolean,initInputText:String,showArrows:Boolean,showAutocomplete:Boolean,isTimeCalendarField:Boolean,tabIndex:{type:Number,requiered:!1,default:0}},emits:["inputChanged","focus","blur","decreaseClick","decreaseMouseDown","increaseClick","increaseMouseDown","autocompleteElementClicked","isTimeCalendarField","inputChangedNative","keydown","mouseup"],data:function(){return{showStationAddress:!1,inputValue:"",isFocused:!1,savedInputValue:""}},watch:{initInputText:function(t){this.inputValue=t},isFocused:function(){this.isFocused&&this.setShowStationAddress()}},created:function(){this.inputValue=this.initInputText?this.initInputText:""},methods:{onInput:function(t){this.setShowStationAddress(),this.$emit("inputChanged",t.target.value),this.$emit("inputChangedNative",t)},setShowStationAddress:function(){this.inputValue.length>2?this.showStationAddress=!0:this.showStationAddress=!1},onElementClicked:function(t){this.inputValue=t.name,this.savedInputValue=t.name,this.showStationAddress=!1,this.$emit("autocompleteElementClicked",t)},onBlur:function(t){this.savedInputValue&&(this.inputValue=this.savedInputValue,this.savedInputValue=null),this.$emit("blur",t),this.showStationAddress=!1,this.isFocused=!1}}});const Oe=pe()(be,[["render",Zt]]);var ve=Oe,ge={class:"mode walk"},je={class:"mode-header"},fe=["checked"];function Se(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("fieldset",ge,[Object(i["h"])("legend",je,[Object(i["h"])("label",null,[Object(i["h"])("input",{type:"checkbox",checked:t.isChecked,onInput:e[0]||(e[0]=function(e){return t.$emit("isCheckedChanged",e.target.checked)})},null,40,fe),Object(i["i"])(" "+Object(i["F"])(t.title),1)])]),Object(i["B"])(t.$slots,"default")])}var ye=Object(i["k"])({name:"BlockWithCheckbox",props:{title:{type:String},isChecked:{type:Boolean}},emits:["isCheckedChanged"]});const Te=pe()(ye,[["render",Se]]);var De=Te,ke={class:"option"},we={class:"label"},Ce={class:"numeric slider control"};function $e(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("div",ke,[Object(i["h"])("div",we,Object(i["F"])(t.$t.maxDuration),1),Object(i["h"])("div",Ce,[Object(i["O"])(Object(i["h"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.sliderValueComputed=e}),type:"range",min:"0",max:"30",step:"1"},null,512),[[i["K"],t.sliderValueComputed]]),Object(i["O"])(Object(i["h"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.sliderValueComputed=e}),type:"text"},null,512),[[i["K"],t.sliderValueComputed]])])])}var Fe=Object(i["k"])({name:"Slider",props:{initSliderValue:{type:Number,required:!0}},emits:["sliderValueChanged"],data:function(){return{sliderValue:this.initSliderValue}},computed:{sliderValueComputed:{get:function(){return this.sliderValue.toString()},set:function(t){var e=+t;""===t||isNaN(e)||(this.sliderValue=e-1,this.sliderValue=e>30?30:e<0?0:e)}}},watch:{sliderValue:function(){this.$emit("sliderValueChanged",this.sliderValue)}}});const Ie=pe()(Fe,[["render",$e]]);var xe=Ie,Me={class:"month"},_e={class:"month-name"},Le={class:"weekdays"},Ee={class:"calendardays"},Ne=["onMousedown"];function Re(t,e){var n=Object(i["C"])("InputField");return Object(i["u"])(),Object(i["g"])("div",null,[Object(i["j"])(n,{showLabel:!0,labelName:t.$t.date,iconType:"event",isTimeCalendarField:!0,showArrows:!0,initInputText:t.dateToDisplay,onInputChangedNative:t.onFieldInput,onFocus:e[0]||(e[0]=function(e){return t.calendarVisible=!0}),onBlur:t.inputBluredHandler,onDecreaseClick:e[1]||(e[1]=function(e){return t.stopInterval(-1)}),onIncreaseClick:e[2]||(e[2]=function(e){return t.stopInterval(1)}),onDecreaseMouseDown:e[3]||(e[3]=function(e){return t.mouseDown(-1)}),onIncreaseMouseDown:e[4]||(e[4]=function(e){return t.mouseDown(1)}),onKeydown:t.onKeyDown,onMouseup:t.onMouseUp,showAutocomplete:!1},null,8,["labelName","initInputText","onInputChangedNative","onBlur","onKeydown","onMouseup"]),Object(i["O"])(Object(i["h"])("div",{class:"paper calendar",onMousedown:e[7]||(e[7]=function(){return t.calendarClickedHandler&&t.calendarClickedHandler.apply(t,arguments)})},[Object(i["h"])("div",Me,[Object(i["h"])("i",{class:"icon",onClick:e[5]||(e[5]=function(e){return t.changeMonth(-1)})},"chevron_left"),Object(i["h"])("span",_e,Object(i["F"])(t.currentMonthToDisplay),1),Object(i["h"])("i",{class:"icon",onClick:e[6]||(e[6]=function(e){return t.changeMonth(1)})},"chevron_right")]),Object(i["h"])("ul",Le,[(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.weekDayNames,(function(t){return Object(i["u"])(),Object(i["g"])("li",{key:t},Object(i["F"])(t),1)})),128))]),Object(i["h"])("ul",Ee,[(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.daysToDisplay,(function(e){return Object(i["u"])(),Object(i["g"])("li",{key:e.valueOf(),class:Object(i["p"])([e.getMonth()===t.currentMonth?"in-month":"out-of-month",t.compareDayWithInterval(e)?"valid-day":"invalid-day",e.getTime()==t.currentDate.getTime()?"selected":""]),onMousedown:Object(i["P"])((function(n){return t.dayClick(e)}),["stop"])},Object(i["F"])(e.getDate()),43,Ne)})),128))])],544),[[i["L"],t.calendarVisible]])])}n("466d"),n("9129");var Be=Object(i["k"])({name:"Calendar",components:{InputField:ve},emits:["dateChanged"],data:function(){return{daysToDisplay:[],currentMonthToDisplay:"",weekDayNames:[],currentMonth:0,calendarVisible:!1,currentDate:{},calendarClicked:!1,timeout:0,interval:0,beginIntervalDate:0,endIntervalDate:0,prevString:"..",dateToDisplay:""}},watch:{currentDate:function(t){this.dateToDisplay=this.$ds.getDateString(this.currentDate.valueOf()),this.prevString=this.dateToDisplay,this.daysToDisplay=[],this.weekDayNames=[],this.currentMonthToDisplay="".concat(t.toLocaleString(this.$ts.currentLocale,{month:"long"})," ").concat(t.getFullYear()),this.currentMonth=t.getMonth();var e=new Date(t.getFullYear(),t.getMonth(),1,this.currentDate.getHours(),this.currentDate.getMinutes(),this.currentDate.getSeconds(),this.currentDate.getMilliseconds()),n=e.getDate()-(0===e.getDay()?7:e.getDay());e=new Date(e.setDate(n));for(var i=0;i<42;i++){if(this.daysToDisplay.push(e),e=new Date(e.setDate(e.getDate()+1)),(35===i||28===i)&&e.getMonth()!==this.currentMonth){this.daysToDisplay.pop();break}i<7&&this.weekDayNames.push(e.toLocaleString(this.$ts.currentLocale,{weekday:"short"}))}}},created:function(){this.currentDate=this.$ds.date,this.beginIntervalDate=1e3*this.$ds.intervalFromServer.begin,this.endIntervalDate=1e3*this.$ds.intervalFromServer.end,this.prevString=this.$ds.getDateString(this.currentDate.valueOf()),this.dateToDisplay=this.$ds.getDateString(this.currentDate.valueOf())},methods:{changeMonth:function(t){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+t,this.currentDate.getDate()),this.$emit("dateChanged",this.currentDate)},changeDay:function(t){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()+t),this.$emit("dateChanged",this.currentDate)},calendarClickedHandler:function(){this.calendarClicked=!0},inputBluredHandler:function(t){this.calendarClicked?(t.target.focus(),this.calendarClicked=!1):(this.calendarVisible=!1,this.setDateFromString(this.prevString,!0))},onFieldInput:function(t){var e=t.target,n=e.value;if(""===n)return n="..",this.setDateToDisplay(n,e,0),void(this.prevString=n);if(n!==this.prevString){if(!this.setDateFromString(n)){var i=n.split(".");if(3!==i.length)n=this.prevString,this.setDateToDisplay(this.prevString);else{var s=/^\d+$/,a=i.map((function(t){return Number.parseInt(t)}));(0!==i[0].length&&!i[0].match(s)||void 0===a[0]||a[0]<0||a[0]>31||0!==i[1].length&&!i[1].match(s)||void 0===a[1]||a[1]<0||a[1]>12||0!==i[2].length&&!i[2].match(s)||void 0===a[2]||a[2]<0||i[0].length>2||i[1].length>2||i[2].length>4)&&(n=this.prevString,this.setDateToDisplay(this.prevString)),i=n.split("."),a=i.map((function(t){return Number.parseInt(t)})),void 0!==a[0]&&a[0]>3&&a[0]<10&&2!==i[0].length&&(i[0]="0"+a[0],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,3)),void 0!==a[1]&&a[1]>1&&a[1]<10&&2!==i[1].length&&(i[1]="0"+a[1],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,6)),void 0!==a[2]&&2===i[2].length&&20!==a[2]&&(i[2]="20"+a[2],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n))}}this.prevString=n}},onKeyDown:function(t){var e=t.target,n=e.value,i=n.split("."),s=this.$ds.getDateString(this.currentDate.valueOf()),a=s.split(".");"Backspace"===t.key&&(3===e.selectionStart&&e.setSelectionRange(2,2),6===e.selectionStart&&e.setSelectionRange(5,5)),Number.isNaN(Number.parseInt(t.key))||2!==e.selectionStart||e.setSelectionRange(3,3),Number.isNaN(Number.parseInt(t.key))||5!==e.selectionStart||e.setSelectionRange(6,6),"ArrowRight"===t.key&&(Number.parseInt(i[0])>0&&Number.parseInt(i[0])<=3&&1===e.selectionStart&&i[0].length<2&&(i[0]="0"+i[0],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,2)),1===Number.parseInt(i[1])&&4===e.selectionStart&&i[1].length<2&&(i[1]="0"+i[1],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n)),""===i[0]&&0===e.selectionStart&&(n=a[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,2)),"0"===i[0]&&1===e.selectionStart&&(n=a[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,2)),""===i[1]&&3===e.selectionStart&&(n=i[0]+"."+a[1]+"."+i[2],this.setDateToDisplay(n,e,5)),"0"===i[1]&&4===e.selectionStart&&(n=i[0]+"."+a[1]+"."+i[2],this.setDateToDisplay(n,e,5))),"ArrowLeft"===t.key&&(Number.parseInt(i[2])>=0&&6===e.selectionStart&&(2===i[2].length&&(i[2]="20"+i[2],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,6)),1===i[2].length&&(i[2]="200"+i[2],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,6))),"0"===i[1]&&3===e.selectionStart&&(n=i[0]+"."+a[1]+"."+i[2],this.setDateToDisplay(n,e,3)),"1"===i[1]&&3===e.selectionStart&&(i[1]="0"+i[1],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,3))),this.prevString=n},onMouseUp:function(t){if(0===t.button){var e=t.target,n=e.value,i=n.split("."),s=this.$ds.getDateString(this.currentDate.valueOf()),a=s.split("."),o=null!==e.selectionStart?e.selectionStart:0;Number.parseInt(i[0])>0&&Number.parseInt(i[0])<=3&&1!==e.selectionStart&&0!==e.selectionStart&&1===i[0].length&&(i[0]="0"+i[0],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,o+1)),""===i[0]&&0!==e.selectionStart&&(n=a[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,o+2)),"0"===i[0]&&0!==e.selectionStart&&1!==e.selectionStart&&(n=a[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,o+1)),1===Number.parseInt(i[1])&&3!==e.selectionStart&&4!==e.selectionStart&&1===i[1].length&&(i[1]="0"+i[1],n=i[0]+"."+i[1]+"."+i[2],o<3?this.setDateToDisplay(n,e,o):this.setDateToDisplay(n,e,o+1)),""===i[1]&&3!==e.selectionStart&&(n=i[0]+"."+a[1]+"."+i[2],o<3?this.setDateToDisplay(n,e,o):this.setDateToDisplay(n,e,o+2)),"0"===i[1]&&3!==e.selectionStart&&4!==e.selectionStart&&(n=i[0]+"."+a[1]+"."+i[2],o<3?this.setDateToDisplay(n,e,o):this.setDateToDisplay(n,e,o+1)),"20"===i[2]&&6!==e.selectionStart&&7!==e.selectionStart&&8!==e.selectionStart&&(n=i[0]+"."+i[1]+".2020",this.setDateToDisplay(n,e,o)),1===i[2].length&&6!==e.selectionStart&&7!==e.selectionStart&&(i[2]="200"+i[2],n=i[0]+"."+i[1]+"."+i[2],this.setDateToDisplay(n,e,o))}},dayClick:function(t){this.currentDate=t,this.calendarVisible=!1},mouseDown:function(t){var e=this;this.timeout=setTimeout((function(){return e.interval=setInterval((function(){return e.changeDay(t)}),100)}),1e3)},stopInterval:function(t){clearInterval(this.interval),clearTimeout(this.timeout),this.changeDay(t)},compareDayWithInterval:function(t){var e=t.valueOf();return e>=this.beginIntervalDate&&e<this.endIntervalDate},setDateToDisplay:function(t,e,n){var i=this;this.dateToDisplay="",this.$nextTick((function(){i.dateToDisplay=t,i.setDateFromString(t),e&&void 0!==n&&i.$nextTick((function(){return e.setSelectionRange(n,n)}))}))},setDateFromString:function(t,e){var n=this.$ds.parseDate(t);return n.valueOf()?(this.currentDate=n,this.$emit("dateChanged",this.currentDate)):e&&this.setDateToDisplay(this.$ds.getDateString(this.currentDate.valueOf())),!!n.valueOf()}}});const Pe=pe()(Be,[["render",Re]]);var Ve=Pe;function He(t,e,n,s,a,o){var r=Object(i["C"])("InputField");return Object(i["u"])(),Object(i["e"])(r,{labelName:t.$t.time,iconType:"schedule",showLabel:!0,initInputText:t.timeToDisplay,isTimeCalendarField:!0,showArrows:!0,onInputChangedNative:t.setTime,onDecreaseClick:e[0]||(e[0]=function(e){return t.changeTime(-1)}),onIncreaseClick:e[1]||(e[1]=function(e){return t.changeTime(1)}),showAutocomplete:!1,onBlur:e[2]||(e[2]=function(e){return t.setTimeFromString(t.prevString,!0)}),onKeydown:t.onKeyDown,onMouseup:t.onMouseUp},null,8,["labelName","initInputText","onInputChangedNative","onKeydown","onMouseup"])}var Ae=Object(i["k"])({name:"TimeInputField",components:{InputField:ve},emits:["timeChanged"],data:function(){return{time:{},prevString:":",timeToDisplay:""}},watch:{time:function(){this.timeToDisplay=this.$ds.getTimeString(this.time.valueOf())}},created:function(){var t=this.$ds.date;this.time=t,this.prevString=this.timeToDisplay},methods:{changeTime:function(t){this.time=new Date(this.time.getFullYear(),this.time.getMonth(),this.time.getDay(),this.time.getHours()+t,this.time.getMinutes()),this.$emit("timeChanged",this.time)},setTime:function(t){var e=t.target,n=e.value;if(""===n)return n=":",this.setTimeToDisplay(n,e,0),void(this.prevString=n);if(n!==this.prevString){if(!this.setTimeFromString(n)){var i=n.split(":");if(2!==i.length)n=this.prevString,this.setTimeToDisplay(n);else{var s=i.map((function(t){return Number.parseInt(t)})),a=/^\d+$/;(0!==i[0].length&&!i[0].match(a)||void 0===s[0]||s[0]<0||s[0]>=24||0!==i[1].length&&!i[1].match(a)||void 0===s[1]||s[1]<0||s[1]>=60||i[0].length>2||i[1].length>2)&&(n=this.prevString,this.setTimeToDisplay(this.prevString)),i=n.split(":"),s=i.map((function(t){return Number.parseInt(t)})),void 0!==s[0]&&s[0]>2&&s[0]<10&&(i[0]="0"+s[0],n=i[0]+":"+i[1],this.setTimeToDisplay(n)),void 0!==s[1]&&s[1]>5&&s[1]<10&&(i[1]="0"+s[1],n=i[0]+":"+i[1],this.setTimeToDisplay(n))}}this.prevString=n}},onKeyDown:function(t){var e=t.target,n=e.value,i=n.split(":"),s=this.$ds.getTimeString(this.time.valueOf()),a=s.split(":");"Backspace"===t.key&&3===e.selectionStart&&e.setSelectionRange(2,2),Number.isNaN(Number.parseInt(t.key))||2!==e.selectionStart||e.setSelectionRange(3,3),"ArrowRight"===t.key&&(Number.parseInt(i[0])>=0&&Number.parseInt(i[0])<=2&&1===e.selectionStart&&i[0].length<2&&(i[0]="0"+i[0],n=i[0]+":"+i[1],this.setTimeToDisplay(n)),""===i[0]&&0===e.selectionStart&&(n=a[0]+":"+i[1],this.setTimeToDisplay(n,e,2))),"ArrowLeft"===t.key&&Number.parseInt(i[1])>=0&&Number.parseInt(i[1])<=5&&3===e.selectionStart&&i[1].length<2&&(i[1]="0"+i[1],n=i[0]+":"+i[1],this.setTimeToDisplay(n,e,3)),Number.parseInt(t.key)>3&&"2"===i[0]&&1===e.selectionStart&&(i[0]="02",n=i[0]+":"+i[1],this.setTimeToDisplay(n)),this.prevString=n},onMouseUp:function(t){if(0===t.button){var e=t.target,n=e.value,i=n.split(":"),s=this.$ds.getTimeString(this.time.valueOf()),a=s.split(":"),o=null!==e.selectionStart?e.selectionStart:0;Number.parseInt(i[0])>=0&&Number.parseInt(i[0])<=2&&1!==e.selectionStart&&0!==e.selectionStart&&1===i[0].length&&(i[0]="0"+i[0],n=i[0]+":"+i[1],this.setTimeToDisplay(n,e,o+1)),""===i[0]&&0!==e.selectionStart&&(n=a[0]+":"+i[1],this.setTimeToDisplay(n,e,o+2)),Number.parseInt(i[1])>=0&&Number.parseInt(i[1])<=5&&3!==e.selectionStart&&4!==e.selectionStart&&1===i[1].length&&(i[1]="0"+i[1],n=i[0]+":"+i[1],this.setTimeToDisplay(n,e,o))}},setTimeToDisplay:function(t,e,n){var i=this;this.timeToDisplay="",this.$nextTick((function(){i.timeToDisplay=t,i.setTimeFromString(t),e&&void 0!==n&&i.$nextTick((function(){return e.setSelectionRange(n,n)}))}))},setTimeFromString:function(t,e){var n=this.$ds.parseTime(t);return n.valueOf()?(this.time=n,this.$emit("timeChanged",this.time)):e&&this.setTimeToDisplay(this.$ds.getTimeString(this.time.valueOf())),!!n.valueOf()}}});const Ge=pe()(Ae,[["render",He]]);var qe=Ge,We={methods:{getPastOrFuture:function(t,e){var n=new Date(1e3*e);return n<t?"past":"future"},goToStop:function(t,e){t.push({name:"StationTimetable",params:{id:e.station.id}})},getReadableDuration:function(t,e,n){var i=new Date(1e3*(e-t)),s="";return i.getDate()>1&&(s+=n.formatTranslate("days",(i.getDate()-1).toString())),""!==s&&(s+=" "),i.getHours()>1&&(s+=n.formatTranslate("hours",(i.getHours()-1).toString())),""!==s&&(s+=" "),i.getMinutes()>0&&(s+=n.formatTranslate("minutes",i.getMinutes().toString())),s},getProgress:function(t,e,n){var i=e.arrival.time-t.departure.time,s=e.arrival.time-n;return s<0?100:s>i?0:100-s/i*100}}},Ue=["x1","x2"],ze=["cx"],Ye=["xlink:href","x"],Ke=["x"],Xe=["x","width"];function Je(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("g",{class:Object(i["p"])(["part","train-class-".concat(t.transportClass),"acc-0",t.highlightClass])},[Object(i["h"])("line",{x1:t.lineStart,y1:"12",x2:t.lineEnd,y2:"12",class:"train-line"},null,8,Ue),Object(i["h"])("circle",{cx:t.circleX,cy:"12",r:"12",class:"train-circle"},null,8,ze),Object(i["h"])("use",{"xlink:href":"#"+t.transportIcon,class:"train-icon",x:t.iconX,y:"4",width:"16",height:"16"},null,8,Ye),Object(i["h"])("text",{x:t.lineStart,y:"40","text-anchor":"start",class:"train-name"},Object(i["F"])(t.text),9,Ke),Object(i["h"])("rect",{x:t.lineStart,y:"0",width:t.rectWidth,height:"24",class:"tooltipTrigger",onMouseenter:e[0]||(e[0]=function(){return t.onMouseEnter&&t.onMouseEnter.apply(t,arguments)}),onMouseleave:e[1]||(e[1]=function(){return t.onMouseLeave&&t.onMouseLeave.apply(t,arguments)})},null,40,Xe)],2)}var Ze={methods:{convertClassZ:function(t){switch(t){case 1:case 2:case 4:case 5:case 6:return"train";case 0:return"plane";case 7:return"sbahn";case 8:return"ubahn";case 9:return"tram";case 11:return"ship";case 3:default:return"bus"}}}},Qe=Object(i["k"])({name:"TransportLine",mixins:[Ze],props:{move:{type:Object,required:!0},lineStart:{type:Number,required:!0},lineEnd:{type:Number,required:!0},connectionIndex:{type:Number,required:!0},stops:{type:Array,required:!1},mapHoverOptions:{type:Object,required:!1,default:null}},emits:["mouseEnter","mouseLeave"],data:function(){return{highlightClass:""}},computed:{rectWidth:function(){return this.lineEnd-this.lineStart},lineX2:function(){return this.lineEnd+3},circleX:function(){return this.lineStart+12},iconX:function(){return this.lineStart+4},text:function(){return"name"in this.move.move?this.move.move.name:""},transportClass:function(){return"clasz"in this.move.move?this.move.move.clasz.toString():"foot"===this.move.move.mumo_type?"walk":this.move.move.mumo_type},transportIcon:function(){return"clasz"in this.move.move?this.convertClassZ(this.move.move.clasz):this.move.move.mumo_type}},watch:{mapHoverOptions:function(){this.highlightClass=this.getHighlightClass()}},methods:{onMouseEnter:function(){this.$mapService.mapHighlightConnections([this.connectionIndex]),this.$emit("mouseEnter",{x:this.lineStart>95?95:this.lineStart,transport:this.move.move})},onMouseLeave:function(){this.$mapService.mapHighlightConnections([]),this.$emit("mouseLeave")},getHighlightClass:function(){if(!this.mapHoverOptions||!this.mapHoverOptions.connectionIds.includes(this.connectionIndex)||!this.stops)return this.$emit("mouseLeave"),"";var t=this.stops.map((function(t){return t.station.id}));return this.mapHoverOptions.stationIds.some((function(e){return t.includes(e.departure)&&t.includes(e.arrival)}))||this.stops[0].station===this.mapHoverOptions.departureStation&&this.stops[this.stops.length-1].station===this.mapHoverOptions.arrivalStation?(this.$emit("mouseEnter",{x:this.lineStart>95?95:this.lineStart,transport:this.move.move}),"highlighted"):"faded"}}});const tn=pe()(Qe,[["render",Je]]);var en=tn,nn=function(t){return Object(i["x"])("data-v-5b4bc604"),t=t(),Object(i["v"])(),t},sn=nn((function(){return Object(i["h"])("div",{class:"spinner"},[Object(i["h"])("div",{class:"bounce1"}),Object(i["h"])("div",{class:"bounce2"}),Object(i["h"])("div",{class:"bounce3"})],-1)})),an=[sn];function on(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("div",{class:Object(i["p"])(["center",t.isButton?"":"loading"])},an,2)}var rn,cn=Object(i["k"])({name:"LoadingBar",props:{isButton:Boolean}});(function(t){t[t["NothingToShow"]=0]="NothingToShow",t[t["Loading"]=1]="Loading",t[t["Loaded"]=2]="Loaded",t[t["Error"]=3]="Error"})(rn||(rn={}));n("00fd");const ln=pe()(cn,[["render",on],["__scopeId","data-v-5b4bc604"]]);var un,dn=ln,pn=n("6dd8"),hn=Object(i["k"])({name:"ConnectionSearch",components:{InputField:ve,BlockWithCheckbox:De,Slider:xe,Calendar:Ve,TimeInputField:qe,TransportLine:en,LoadingBar:dn},mixins:[We],setup:function(){var t=Object(i["z"])();return{linesDiv:t}},data:function(){return{start:"",destination:"",startObject:{},destinationObject:{},isOptionsWindowOpened:!1,pressedOptions:{foot:!0,bicycle:!1,car:!1,footDuration:15,bicycleDuration:15,carDuration:15,footProfile:"default",carParking:!0},firstOptions:{foot:!0,bicycle:!1,car:!1,footDuration:15,bicycleDuration:15,carDuration:15,footProfile:"default",carParking:!0},secondOptions:{foot:!0,bicycle:!1,car:!1,footDuration:15,bicycleDuration:15,carDuration:15,footProfile:"default",carParking:!0},dateTime:this.$ds.date,timeoutIndex:-1,connections:[],initialConnections:[],loadingStates:{content:rn.NothingToShow,upperButton:rn.Loaded,lowerButton:rn.Loaded},LoadingState:rn,isTooltipVisible:[],transportTooltipInfo:[],isUpperEnd:!1,isBottomEnd:!1,separators:[],isDeparture:!0,linesDivWidth:0,textMeasureCanvas:null,TimeGap:un,mapHoverOptions:null}},watch:{linesDiv:function(){var t=this;if(this.linesDiv){if(!this.textMeasureCanvas){var e=document.createElement("canvas").getContext("2d");if(e){var n=window.getComputedStyle(this.linesDiv,null).getPropertyValue("font-weight"),i=window.getComputedStyle(this.linesDiv,null).getPropertyValue("font-size"),s=window.getComputedStyle(this.linesDiv,null).getPropertyValue("font-family");e.font="".concat(n," ").concat(i," ").concat(s),this.textMeasureCanvas=e}}this.linesDivWidth=this.linesDiv.clientWidth,new pn["a"]((function(){return t.linesDivWidth=t.linesDiv?t.linesDiv.clientWidth:0})).observe(this.linesDiv)}}},activated:function(){for(var t=0;t<this.isTooltipVisible.length;t++)this.isTooltipVisible[t]=!1},created:function(){var t=this;window.addEventListener("dragover",(function(t){return t.preventDefault()})),window.addEventListener("dragenter",(function(t){return t.preventDefault()})),window.addEventListener("drop",this.onDrop),this.$mapService.mapSetTooltipDelegates.push(this.mapConnectionHovered);var e=setInterval((function(){t.$mapService.initialized&&(t.$mapService.setPPRSearchOptions({profile:t.firstOptions.footProfile,duration_limit:60*t.firstOptions.footDuration}),clearInterval(e))}));this.$store.state.setStart=function(e){t.startObjectClicked({pos:e,name:"".concat(e.lat,"; ").concat(e.lng),type:"",regions:[]})},this.$store.state.setDestination=function(e){t.destinationObjectClicked({pos:e,name:"".concat(e.lat,"; ").concat(e.lng),type:"",regions:[]})}},methods:{swapStartDest:function(){var t=this.start;this.start=this.destination,this.destination=t;var e=this.startObject;this.startObject=this.destinationObject,this.destinationObject=e,this.$store.state.startInput=this.startObject,this.$store.state.destinationInput=this.destinationObject,this.sendRequest()},setStartInput:function(t){this.start=t},setDestInput:function(t){this.destination=t},optinsButton1Click:function(){this.isOptionsWindowOpened=!0,this.pressedOptions=this.firstOptions,this.$mapService.setPPRSearchOptions({profile:this.firstOptions.footProfile,duration_limit:60*this.firstOptions.footDuration})},optinsButton2Click:function(){this.isOptionsWindowOpened=!0,this.pressedOptions=this.secondOptions},optionsWindowCloseClick:function(){this.isOptionsWindowOpened=!1,this.sendRequest()},dateChanged:function(t){this.dateTime=new Date(t.getFullYear(),t.getMonth(),t.getDate(),this.dateTime.getHours(),this.dateTime.getMinutes(),this.dateTime.getSeconds(),this.dateTime.getMilliseconds()),this.sendRequest()},timeChanged:function(t){this.dateTime=new Date(this.dateTime.getFullYear(),this.dateTime.getMonth(),this.dateTime.getDate(),t.getHours(),t.getMinutes(),this.dateTime.getSeconds(),this.dateTime.getMilliseconds()),this.sendRequest()},startObjectClicked:function(t){this.startObject=t,this.setStartInput(t.name),this.$store.state.startInput=t,this.sendRequest(),this.mapSetMarkers()},destinationObjectClicked:function(t){this.destinationObject=t,this.setDestInput(t.name),this.$store.state.destinationInput=t,this.sendRequest(),this.mapSetMarkers()},setSeparator:function(t){this.separators=[];for(var e=1;e<t.length;e++){var n=new Date(1e3*t[e-1].stops[0].departure.time),i=new Date(1e3*t[e].stops[0].departure.time);(n.getDate()<i.getDate()||n.getMonth()<i.getMonth()||n.getFullYear()<i.getFullYear())&&this.separators.push(e)}},sendRequest:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&(this.isUpperEnd=!1,this.isBottomEnd=!1),""!==this.start&&""!==this.destination){this.loadingStates.content=e?rn.Loaded:rn.Loading,e===un.Earlier?this.loadingStates.upperButton=rn.Loading:e===un.Later&&(this.loadingStates.lowerButton=rn.Loading),this.isTooltipVisible=[],-1!==this.timeoutIndex&&clearTimeout(this.timeoutIndex);var n,i={interval:{begin:null===e?Math.floor(this.dateTime.valueOf()/1e3)-(this.isDeparture?3600:7200):e===un.Earlier?this.connections[0].stops[0].departure.time-7200:this.connections[this.connections.length-1].stops[0].departure.time+60,end:null===e?Math.floor(this.dateTime.valueOf()/1e3)+(this.isDeparture?3600:0):e===un.Later?this.connections[this.connections.length-1].stops[0].departure.time+7200:this.connections[0].stops[0].departure.time-60},min_connection_count:null===e?5:3,extend_interval_earlier:null===e||e===un.Earlier,extend_interval_later:null===e||e===un.Later};i="id"in this.startObject?Object(Ht["a"])(Object(Ht["a"])({},i),{},{station:{name:this.startObject.name,id:this.startObject.id}}):Object(Ht["a"])(Object(Ht["a"])({},i),{},{position:this.startObject.pos}),n="id"in this.destinationObject?{name:this.destinationObject.name,id:this.destinationObject.id}:this.destinationObject.pos,this.timeoutIndex=setTimeout((function(){t.timeoutIndex=-1,t.$postService.getConnectionResponse({start_type:"id"in t.startObject?"PretripStart":"IntermodalPretripStart",start:i,start_modes:t.getModesArray(t.firstOptions),destination_type:"id"in t.destinationObject?"InputStation":"InputPosition",destination:n,destination_modes:t.getModesArray(t.secondOptions)}).then((function(n){t.$store.state.areConnectionsDropped=!1,t.setConnections(n.connections,e,i.extend_interval_earlier)})).catch((function(){t.loadingStates.content=rn.Error}))}),500)}},setConnections:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===e?(this.connections=t,this.initialConnections=Object(Vt["a"])(this.connections)):e===un.Earlier?this.connections=t.concat(this.connections):e===un.Later&&(this.connections=this.connections.concat(t)),0===t.length){if(0===this.connections.length)throw new Error;!0===n?this.isUpperEnd=!0:!1===n&&(this.isBottomEnd=!0)}this.loadingStates.content=rn.Loaded,this.loadingStates.upperButton=rn.Loaded,this.loadingStates.lowerButton=rn.Loaded;for(var i=0;i<this.connections.length;i++)this.isTooltipVisible.push(!1),this.transportTooltipInfo.push({});this.$store.state.connections=this.connections,this.setSeparator(this.connections),this.mapSetMarkers();var s=this.connections.map((function(t,e){return{id:e,stations:t.stops.map((function(t){return t.station})),trains:t.trips.map((function(e){return{trip:e.id,sections:t.stops.slice(e.range.from,e.range.to).map((function(n,i){return{departureStation:n.station,arrivalStation:t.stops[e.range.from+i+1].station,scheduledDepartureTime:n.departure.schedule_time,scheduledArrivalTime:t.stops[e.range.from+i+1].arrival.schedule_time}}))}})),walks:t.transports.filter((function(t){return"mumo_type"in t.move})).map((function(t){return t.move})).map((function(e){return{departureStation:t.stops[e.range.from].station,arrivalStation:t.stops[e.range.to].station,mumoType:e.mumo_type,accessibility:e.accessibility,duration:t.stops[e.range.to].arrival.time-t.stops[e.range.from].departure.time}}))}}));this.$mapService.mapSetConnections({mapId:"map",connections:s,lowestId:0}),this.$store.state.mapConnections=s,this.$mapService.mapFitBounds({mapId:"map",coords:this.connections.map((function(t){return t.stops})).reduce((function(t,e){return t.concat(e)}),[]).map((function(t){return[t.station.pos.lat,t.station.pos.lng]}))})},getModesArray:function(t){var e=[];return t.foot&&e.push({mode_type:"FootPPR",mode:{search_options:{profile:t.footProfile,duration_limit:60*t.footDuration}}}),t.bicycle&&e.push({mode_type:"Bike",mode:{max_duration:60*t.bicycleDuration}}),t.car&&(t.carParking?e.push({mode_type:"CarParking",mode:{max_car_duration:60*t.carDuration,ppr_search_options:{profile:"default",duration_limit:300}}}):e.push({mode_type:"Car",mode:{max_duration:60*t.carDuration}})),e},showTooltip:function(t,e){this.isTooltipVisible[e]=!0;var n=t.transport,i=this.connections[e].stops.slice(n.range.from,n.range.to+1);if("clasz"in n)this.transportTooltipInfo[e]={start:i[0].station.name,destination:i[i.length-1].station.name,departure:this.$ds.getTimeString(1e3*i[0].departure.time),arrival:this.$ds.getTimeString(1e3*i[i.length-1].arrival.time),transportName:n.name,x:t.x};else{var s=this.connections[e].transports.map((function(t){return t.move})),a=i[0].station.name;0===s.indexOf(n)?a=this.startObject.name:(1===s.indexOf(n)&&"mumo_type"in s[0]&&"car"===s[0].mumo_type||s.indexOf(n)===s.length-1&&"mumo_type"in n&&"car"===n.mumo_type)&&(a=this.$t.parking);var o=i[i.length-1].station.name,r=s[s.length-1];s.indexOf(n)===s.length-1?o=this.destinationObject.name:(s.indexOf(n)===s.length-2&&"mumo_type"in r&&"car"===r.mumo_type||0===s.indexOf(n)&&"mumo_type"in n&&"car"===n.mumo_type)&&(o=this.$t.parking),this.transportTooltipInfo[e]={start:a,destination:o,departure:this.$ds.getTimeString(1e3*i[0].departure.time),arrival:this.$ds.getTimeString(1e3*i[i.length-1].arrival.time),transportName:"foot"===n.mumo_type?this.$t.walk:this.$t[n.mumo_type],x:t.x}}},connectionClicked:function(t){this.$router.push({name:"Connection",params:{index:t}})},getNonEmptyTransports:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];"mumo_id"in i.move&&-1===i.move.mumo_id?e[e.length-1].move.range.to=i.move.range.to:e.push(Object(Ht["a"])({},i))}return e},fillMovesWithLineData:function(t,e){for(var n=26,i=0,s=this.linesDivWidth,a=e.stops[0].departure.time,o=[],r=e.transports.filter((function(t){return!("mumo_id"in t.move)||-1!==t.move.mumo_id})),c=0;c<t.length;c++){var l=t[c],u=n;if(this.textMeasureCanvas&&"name"in l.move){var d=this.textMeasureCanvas.measureText(l.move.name).width;d>u&&(u=d)}var p=e.stops[l.move.range.from].departure.time-a,h=u;h=l.move.range.to===e.stops.length-1?e.stops[l.move.range.to].arrival.time-a:e.stops[l.move.range.to].departure.time-a;var m=e.stops[e.stops.length-1].arrival.time-a,b=s*(p/m),O=s-n*(t.length-c)-10;b<i&&(b=i),b>O&&(b=O);var v=s*(h/m);v<b+u&&(v=b+u),(v>s||c===t.length-1)&&(v=s),o.push({move:l,originalMove:r[c],lineStart:b,lineEnd:v}),i=v}return o},onDrop:function(t){var e=this;null!==t.dataTransfer&&t.dataTransfer.files.length>0&&(t.preventDefault(),t.dataTransfer.files[0].text().then((function(t){e.$store.state.areConnectionsDropped=!0,e.setConnections(JSON.parse(t).content.connections)})))},mapConnectionHovered:function(t){this.connections&&(this.mapHoverOptions=null,t.hoveredTripSegments&&t.hoveredTripSegments.length>0?this.mapHoverOptions={connectionIds:t.hoveredTripSegments.map((function(t){return t.connectionIds})).reduce((function(t,e){return t.concat(e)}),[]),stationIds:t.hoveredTripSegments.map((function(t){return{departure:t.d_station_id,arrival:t.a_station_id}}))}:t.hoveredWalkSegment&&(this.mapHoverOptions={connectionIds:t.hoveredWalkSegment.connectionIds,stationIds:[{departure:t.hoveredWalkSegment.walk.departureStation.id,arrival:t.hoveredWalkSegment.walk.arrivalStation.id}],departureStation:t.hoveredWalkSegment.walk.departureStation,arrivalStation:t.hoveredWalkSegment.walk.arrivalStation}))},mapSetMarkers:function(){this.$mapService.mapSetMarkers({startPosition:this.startObject.pos,startName:this.startObject.name,destinationPosition:this.destinationObject.pos,destinationName:this.destinationObject.name})}}});(function(t){t[t["Earlier"]=1]="Earlier",t[t["Later"]=2]="Later"})(un||(un={}));const mn=pe()(hn,[["render",Pt]]);var bn=mn,On={class:"trip-search"},vn={class:"header"},gn={id:"trip-search-form"},jn={class:"pure-g gutters"},fn={class:"pure-g gutters"},Sn={key:1,class:"trips"},yn={style:{"list-style-type":"none","margin-left":"-40px"}},Tn={class:"trip-train"},Dn={class:"trip-time"},kn={class:"time"},wn={key:0,class:"date"},Cn={class:"trip-first-station"},$n=["onClick"],Fn=["title"],In=Object(i["h"])("i",{class:"icon"},"arrow_forward",-1);function xn(t,e,n,s,a,o){var r=Object(i["C"])("InputField"),c=Object(i["C"])("Calendar"),l=Object(i["C"])("TimeInputField"),u=Object(i["C"])("LoadingBar"),d=Object(i["C"])("TransportTypeBox");return Object(i["u"])(),Object(i["g"])("div",On,[Object(i["h"])("div",vn,[Object(i["h"])("div",gn,[Object(i["h"])("div",jn,[Object(i["j"])(r,{class:"pure-u-1 pure-u-sm-1-2 train-nr",labelName:t.$t.trainNr,iconType:"train",showLabel:!0,showAutocomplete:!1,onInputChanged:t.setCurrentTrainNumber},null,8,["labelName","onInputChanged"])]),Object(i["h"])("div",fn,[Object(i["j"])(c,{class:"pure-u-1 pure-u-sm-12-24 to-location",onDateChanged:t.setNewDate},null,8,["onDateChanged"]),Object(i["j"])(l,{onTimeChanged:t.setNewTime,class:"pure-u-1 pure-u-sm-12-24"},null,8,["onTimeChanged"])])])]),t.contentLoadingState===t.LoadingState.Loading?(Object(i["u"])(),Object(i["e"])(u,{key:0,isButton:!1})):t.contentLoadingState===t.LoadingState.Loaded?(Object(i["u"])(),Object(i["g"])("div",Sn,[Object(i["O"])(Object(i["h"])("ul",yn,[(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.trainGuesses,(function(e){return Object(i["u"])(),Object(i["g"])("li",{class:"trip",key:e},[Object(i["h"])("div",Tn,[Object(i["h"])("span",null,[Object(i["j"])(d,{transport:e.trip_info.transport,trip:e.trip_info.id},null,8,["transport","trip"])])]),Object(i["h"])("div",Dn,[Object(i["h"])("div",kn,Object(i["F"])(t.setTimeToDisplay(e.trip_info.id.time)),1),t.checkDay(e.trip_info.id.time)?(Object(i["u"])(),Object(i["g"])("div",wn,Object(i["F"])(t.setDateToDisplay(e.trip_info.id.time)),1)):Object(i["f"])("",!0)]),Object(i["h"])("div",Cn,[Object(i["h"])("div",{class:"station",title:"",onClick:function(n){return t.goToFirstStation(e)}},Object(i["F"])(e.first_station.name),9,$n),Object(i["h"])("div",{class:"direction",title:e.trip_info.transport.direction},[In,Object(i["i"])(" "+Object(i["F"])(e.trip_info.transport.direction),1)],8,Fn)])])})),128))],512),[[i["L"],t.areGuessesDisplayed]])])):Object(i["f"])("",!0)])}var Mn=["data-tooltip"],_n={class:"train-icon"},Ln=["xlink:href"],En={class:"train-name"};function Nn(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("div",{onClick:e[0]||(e[0]=function(e){return t.goToTripDetails()})},[Object(i["h"])("div",{class:Object(i["p"])("train-box train-class-".concat(t.transport.clasz," with-tooltip")),"data-tooltip":t.$t.provider+": "+t.transport.provider+(t.transport.train_nr?"\n".concat(t.$t.trainNr,": ")+t.transport.train_nr:"")},[(Object(i["u"])(),Object(i["g"])("svg",_n,[Object(i["h"])("use",{"xlink:href":"#"+t.icon},null,8,Ln)])),Object(i["h"])("span",En,Object(i["F"])(t.transport.name),1)],10,Mn)])}var Rn=Object(i["k"])({name:"TransportTypeBox",mixins:[Ze],props:{transport:{type:Object,required:!0},trip:{type:Object,required:!1}},computed:{icon:function(){return this.convertClassZ(this.transport.clasz)}},methods:{goToTripDetails:function(){if(this.trip){var t=this.trip;this.$router.push({name:"Trip",params:t})}}}});const Bn=pe()(Rn,[["render",Nn]]);var Pn=Bn,Vn=Object(i["k"])({name:"TrainSearch",components:{Calendar:Ve,TimeInputField:qe,InputField:ve,TransportTypeBox:Pn,LoadingBar:dn},data:function(){return{currentTrainInput:-1,areGuessesDisplayed:!1,currentDate:{},trainGuesses:[],contentLoadingState:rn.NothingToShow,LoadingState:rn}},watch:{currentTrainInput:function(){setTimeout(this.sendRequest,500)}},created:function(){this.currentDate=this.$ds.date},methods:{setCurrentTrainNumber:function(t){isNaN(+t)||(this.currentTrainInput=+t)},sendRequest:function(){var t=this;this.contentLoadingState=rn.Loading,-1!==this.currentTrainInput&&(this.$postService.getTrainGuessResponse(Math.floor(this.currentDate.valueOf()/1e3),this.currentTrainInput).then((function(e){t.trainGuesses=e.trips,t.contentLoadingState=rn.Loaded})),this.areGuessesDisplayed=!0)},setTimeToDisplay:function(t){return this.$ds.getTimeString(1e3*t)},setDateToDisplay:function(t){var e=new Date(1e3*t);return e.toLocaleString(this.$ts.availableLocales[0],{month:"2-digit",day:"2-digit"}).slice(0,5)},goToFirstStation:function(t){var e={name:t.first_station.name,id:t.first_station.id,time:t.trip_info.id.time},n=e;this.$router.push({name:"StationTimeTableFromTrainSearch",params:n})},setNewDate:function(t){this.currentDate=new Date(t.getFullYear(),t.getMonth(),t.getDate(),this.currentDate.getHours(),this.currentDate.getMinutes())},checkDay:function(){return this.$ds.date.getDate()!==this.currentDate.getDate()},setNewTime:function(t){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),t.getHours(),t.getMinutes())}}});const Hn=pe()(Vn,[["render",xn]]);var An=Hn,Gn={class:"connection-info"},qn={class:"header"},Wn=Object(i["h"])("i",{class:"icon"},"arrow_back",-1),Un=[Wn],zn={class:"details"},Yn={class:"date"},Kn={class:"connection-times"},Xn={class:"times"},Jn={class:"connection-departure"},Zn={class:"connection-arrival"},Qn={class:"locations"},ti={class:"summary"},ei={class:"duration"},ni=Object(i["h"])("i",{class:"icon"},"schedule",-1),ii={class:"interchanges"},si=Object(i["h"])("i",{class:"icon"},"transfer_within_a_station",-1),ai=Object(i["h"])("div",{class:"actions"},null,-1),oi=["id"];function ri(t,e,n,s,a,o){var r=Object(i["C"])("LoadingBar"),c=Object(i["C"])("WayTransport"),l=Object(i["C"])("WayCustomMovement");return t.isContentLoaded?(Object(i["u"])(),Object(i["g"])("div",{key:1,class:Object(i["p"])(["connection-details",t.isTripView?"trip-view":""])},[Object(i["h"])("div",Gn,[Object(i["h"])("div",qn,[Object(i["h"])("button",{class:"back",onClick:e[0]||(e[0]=function(e){return t.$router.back()})},Un),Object(i["h"])("div",zn,[Object(i["h"])("div",Yn,Object(i["F"])(t.date),1),Object(i["h"])("div",Kn,[Object(i["h"])("div",Xn,[Object(i["h"])("div",Jn,Object(i["F"])(t.departure),1),Object(i["h"])("div",Zn,Object(i["F"])(t.arrival),1)]),Object(i["h"])("div",Qn,[Object(i["h"])("div",null,Object(i["F"])(t.firstStopName),1),Object(i["h"])("div",null,Object(i["F"])(t.lastStopName),1)])]),Object(i["h"])("div",ti,[Object(i["h"])("span",ei,[ni,Object(i["i"])(Object(i["F"])(t.duration),1)]),Object(i["h"])("span",ii,[si,Object(i["i"])(Object(i["F"])(t.changes),1)])])]),ai])]),Object(i["h"])("div",{class:"connection-journey",id:t.isTripView?"sub-connection-journey":"connection-journey"},[(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.transports,(function(e,n){return Object(i["u"])(),Object(i["g"])(i["a"],{key:e.line_id},["Transport"===e.move_type?(Object(i["u"])(),Object(i["e"])(c,{key:0,areStopsInitialExpanded:t.isTripView,transport:e.move,stops:t.getStopsForTransport(e.move),additionalMove:t.additionalMoves[n],trip:t.getTripForTransport(e.move)},null,8,["areStopsInitialExpanded","transport","stops","additionalMove","trip"])):-1===e.move.mumo_id?(Object(i["u"])(),Object(i["g"])(i["a"],{key:1},[],64)):(Object(i["u"])(),Object(i["e"])(l,{key:2,customMovement:e.move,stops:t.getStopsForTransport(e.move),startStationName:t.determineStartStationNameForCustomMovement(e.move),endStationName:t.determineEndStationNameForCustomMovement(e.move)},null,8,["customMovement","stops","startStationName","endStationName"]))],64)})),128))],8,oi)],2)):(Object(i["u"])(),Object(i["e"])(r,{key:0,isButton:!1}))}var ci=Object(i["h"])("div",{class:"top-border"},null,-1),li={key:0,class:"train-top-line"},ui={class:"first-stop"},di=Object(i["h"])("div",{class:"timeline train-color-border"},null,-1),pi={class:"time"},hi=Object(i["h"])("div",{class:"delay"},null,-1),mi={class:"station"},bi=Object(i["h"])("div",{class:"timeline train-color-border"},null,-1),Oi=Object(i["h"])("i",{class:"icon"},"arrow_forward",-1),vi={class:"timeline-container"},gi=Object(i["h"])("div",{class:"timeline train-color-border bg"},null,-1),ji={class:"icon"},fi={class:"icon"},Si=Object(i["h"])("div",{class:"timeline train-color-border bg"},null,-1),yi={class:"time"},Ti={class:"arrival"},Di={class:"departure"},ki=Object(i["h"])("div",{class:"delay"},[Object(i["h"])("div",{class:"arrival"}),Object(i["h"])("div",{class:"departure"})],-1),wi={class:"station"},Ci=["onClick"],$i={class:"last-stop"},Fi=Object(i["h"])("div",{class:"timeline train-color-border"},null,-1),Ii={class:"time"},xi=Object(i["h"])("div",{class:"delay"},null,-1),Mi={class:"station"};function _i(t,e,n,s,a,o){var r=Object(i["C"])("TransportTypeBox");return Object(i["u"])(),Object(i["g"])("div",{class:Object(i["p"])("train-detail train-class-".concat(t.transport.clasz))},[ci,Object(i["j"])(r,{transport:t.transport,trip:t.trip},null,8,["transport","trip"]),t.additionalMove?(Object(i["u"])(),Object(i["g"])("div",li,[Object(i["h"])("span",null,Object(i["F"])(t.additionalMove+" "+t.$t.walk),1)])):Object(i["f"])("",!0),Object(i["h"])("div",ui,[Object(i["h"])("div",{class:Object(i["p"])(["stop",t.getPastOrFuture(t.$ds.date,t.stops[0].departure.time)])},[di,Object(i["h"])("div",pi,[Object(i["h"])("span",{class:Object(i["p"])(t.getPastOrFuture(t.$ds.date,t.stops[0].departure.time))},Object(i["F"])(t.$ds.getTimeString(1e3*t.stops[0].departure.time)),3)]),hi,Object(i["h"])("div",mi,[Object(i["h"])("span",{onClick:e[0]||(e[0]=function(e){return t.goToStop(t.$router,t.stops[0])})},Object(i["F"])(t.stops[0].station.name),1)])],2)]),Object(i["h"])("div",{class:Object(i["p"])(["direction",t.getPastOrFuture(t.$ds.date,t.stops[0].departure.time)])},[bi,Oi,Object(i["i"])(Object(i["F"])(t.transport.direction),1)],2),Object(i["h"])("div",{class:Object(i["p"])(["intermediate-stops-toggle","clickable",t.getPastOrFuture(t.$ds.date,t.stops[0].departure.time)]),onClick:e[1]||(e[1]=function(e){return t.areStopsExpanded=!t.areStopsExpanded})},[Object(i["h"])("div",vi,[gi,Object(i["h"])("div",{class:"timeline train-color-border progress",style:Object(i["q"])("height: ".concat(t.getStopProgress(t.stops[0]),"%"))},null,4)]),Object(i["h"])("div",{class:"expand-icon",style:Object(i["q"])("visibility:"+(t.stops.length>2?"visible":"hidden"))},[Object(i["h"])("i",ji,Object(i["F"])(t.areStopsExpanded?"expand_more":"expand_less"),1),Object(i["h"])("i",fi,Object(i["F"])(t.areStopsExpanded?"expand_less":"expand_more"),1)],4),Object(i["h"])("span",null,Object(i["F"])(t.$ts.countTranslate("stop",t.stops.length-2))+" ("+Object(i["F"])(t.getReadableDuration(t.stops[0].departure.time,t.stops[t.stops.length-1].arrival.time,t.$ts))+")",1)],2),Object(i["O"])(Object(i["h"])("div",{class:Object(i["p"])(["intermediate-stops",t.areStopsExpanded?"expanded":""])},[(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.getIntermediateStops(t.transport),(function(e){return Object(i["u"])(),Object(i["g"])("div",{key:e.station,class:Object(i["p"])(["stop",t.getPastOrFuture(t.$ds.date,e.departure.time)])},[Si,Object(i["h"])("div",{class:"timeline train-color-border progress",style:Object(i["q"])("height: ".concat(t.getStopProgress(e),"%"))},null,4),Object(i["h"])("div",yi,[Object(i["h"])("div",Ti,[Object(i["h"])("span",{class:Object(i["p"])(t.getPastOrFuture(t.$ds.date,e.arrival.time))},Object(i["F"])(t.$ds.getTimeString(1e3*e.arrival.time)),3)]),Object(i["h"])("div",Di,[Object(i["h"])("span",{class:Object(i["p"])(t.getPastOrFuture(t.$ds.date,e.departure.time))},Object(i["F"])(t.$ds.getTimeString(1e3*e.departure.time)),3)])]),ki,Object(i["h"])("div",wi,[Object(i["h"])("span",{onClick:function(n){return t.goToStop(t.$router,e)}},Object(i["F"])(e.station.name),9,Ci)])],2)})),128))],2),[[i["L"],t.areStopsExpanded]]),Object(i["h"])("div",$i,[Object(i["h"])("div",{class:Object(i["p"])(["stop",t.getPastOrFuture(t.$ds.date,t.stops[t.stops.length-1].arrival.time)])},[Fi,Object(i["h"])("div",Ii,[Object(i["h"])("span",{class:Object(i["p"])(t.getPastOrFuture(t.$ds.date,t.stops[t.stops.length-1].arrival.time))},Object(i["F"])(t.$ds.getTimeString(1e3*t.stops[t.stops.length-1].arrival.time)),3)]),xi,Object(i["h"])("div",Mi,[Object(i["h"])("span",{onClick:e[2]||(e[2]=function(e){return t.goToStop(t.$router,t.stops[t.stops.length-1])})},Object(i["F"])(t.stops[t.stops.length-1].station.name),1)])],2)])],2)}var Li=Object(i["k"])({name:"WayTransport",components:{TransportTypeBox:Pn},mixins:[We],props:{transport:{type:Object,required:!0},stops:{type:Object,required:!0},areStopsInitialExpanded:{type:Boolean,required:!0},additionalMove:{type:String,required:!1},trip:{type:Object,required:!1}},data:function(){return{areStopsExpanded:this.areStopsInitialExpanded}},methods:{getIntermediateStops:function(){return this.stops.slice(1,this.stops.length-1)},getStopProgress:function(t){return this.getProgress(t,this.stops[this.stops.indexOf(t)+1],this.$ds.dateTimeInSeconds)}}});const Ei=pe()(Li,[["render",_i]]);var Ni=Ei,Ri={class:"train-detail train-class-walk trailing-walk"},Bi=Object(i["h"])("div",{class:"top-border"},null,-1),Pi={class:"train-box train-class-walk"},Vi={class:"train-icon"},Hi=["xlink:href"],Ai={class:"first-stop"},Gi=Object(i["h"])("div",{class:"timeline train-color-border"},null,-1),qi={class:"time"},Wi=Object(i["h"])("div",{class:"delay"},null,-1),Ui={class:"station"},zi={class:"intermediate-stops-toggle"},Yi={class:"timeline-container"},Ki=Object(i["h"])("div",{class:"timeline train-color-border bg"},null,-1),Xi=Object(i["h"])("div",{class:"expand-icon"},null,-1),Ji={class:"last-stop"},Zi=Object(i["h"])("div",{class:"timeline train-color-border"},null,-1),Qi={class:"time"},ts=Object(i["h"])("div",{class:"delay"},null,-1),es={class:"station"},ns={class:"virtual"};function is(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("div",Ri,[Bi,Object(i["h"])("div",null,[Object(i["h"])("div",Pi,[(Object(i["u"])(),Object(i["g"])("svg",Vi,[Object(i["h"])("use",{"xlink:href":"#".concat(t.customMovement.mumo_type)},null,8,Hi)]))])]),Object(i["h"])("div",Ai,[Object(i["h"])("div",{class:Object(i["p"])(["stop",t.getPastOrFuture(t.$ds.date,t.stops[0].departure.time)])},[Gi,Object(i["h"])("div",qi,[Object(i["h"])("span",{class:Object(i["p"])(t.getPastOrFuture(t.$ds.date,t.stops[0].departure.time))},Object(i["F"])(t.$ds.getTimeString(1e3*t.stops[0].departure.time)),3)]),Wi,Object(i["h"])("div",Ui,[Object(i["h"])("span",null,Object(i["F"])(t.startStationName),1)])],2)]),Object(i["h"])("div",zi,[Object(i["h"])("div",Yi,[Ki,Object(i["h"])("div",{class:"timeline train-color-border progress",style:Object(i["q"])("height: ".concat(t.getStopProgress(t.stops[0]),"%"))},null,4)]),Xi,Object(i["h"])("span",null,Object(i["F"])(("foot"===t.customMovement.mumo_type?t.$t.walk:t.$t[t.customMovement.mumo_type])+" ("+t.getReadableDuration(t.stops[0].departure.time,t.stops[1].arrival.time,t.$ts)+")"),1)]),Object(i["h"])("div",Ji,[Object(i["h"])("div",{class:Object(i["p"])(["stop",t.getPastOrFuture(t.$ds.date,t.stops[1].arrival.time)])},[Zi,Object(i["h"])("div",Qi,[Object(i["h"])("span",{class:Object(i["p"])(t.getPastOrFuture(t.$ds.date,t.stops[1].arrival.time))},Object(i["F"])(t.$ds.getTimeString(1e3*t.stops[1].arrival.time)),3)]),ts,Object(i["h"])("div",es,[Object(i["h"])("span",ns,Object(i["F"])(t.endStationName),1)])],2)])])}var ss=Object(i["k"])({name:"WayCustomMovement",mixins:[We],props:{customMovement:{type:Object,required:!0},stops:{type:Object,required:!0},startStationName:{type:String,required:!0},endStationName:{type:String,required:!0}},methods:{getStopProgress:function(t){return this.getProgress(t,this.stops[this.stops.indexOf(t)+1],this.$ds.dateTimeInSeconds)}}});const as=pe()(ss,[["render",is]]);var os=as,rs=Object(i["k"])({name:"Trip",components:{LoadingBar:dn,WayTransport:Ni,WayCustomMovement:os},mixins:[We],props:{trip:{type:Object,required:!1},index:{type:Number,required:!1}},data:function(){return{content:{},isContentLoaded:!1,startStationName:void 0,endStationName:void 0,additionalMoves:[]}},computed:{date:function(){return this.$ds.getDateString(1e3*this.content.trips[0].id.time)},departure:function(){return this.getTimeString(this.content.stops[0].departure.time)},arrival:function(){return this.getTimeString(this.content.stops[this.content.stops.length-1].arrival.time)},firstStopName:function(){return void 0!==this.index?this.startStationName:this.content.stops[0].station.name},lastStopName:function(){return void 0!==this.index?this.endStationName:this.content.stops[this.content.stops.length-1].station.name},duration:function(){return this.getReadableDuration(this.content.stops[0].departure.time,this.content.stops[this.content.stops.length-1].arrival.time,this.$ts)},changes:function(){return this.$ts.countTranslate("changes",this.content.trips.length-1)},transports:function(){return this.content.transports},isTripView:function(){return"Trip"===this.$route.name}},watch:{content:function(){var t=this;this.isContentLoaded=!0;var e,n=void 0,i=Object(le["a"])(this.content.transports);try{for(i.s();!(e=i.n()).done;){var s=e.value;this.additionalMoves.push(n),n=void 0,"mumo_id"in s.move&&-1===s.move.mumo_id&&(n=this.getReadableDuration(this.content.stops[s.move.range.from].departure.time,this.content.stops[s.move.range.to].arrival.time,this.$ts))}}catch(o){i.e(o)}finally{i.f()}var a=setInterval((function(){t.$mapService.initialized&&(void 0===t.index?t.$mapService.mapSetDetailFilter({interchangeStations:t.content.stops.map((function(t){return t.station})),trains:t.content.trips.map((function(e){return{trip:e.id,sections:t.content.stops.slice(e.range.from,e.range.to).map((function(n,i){return{departureStation:n.station,arrivalStation:t.content.stops[e.range.from+i+1].station,scheduledDepartureTime:n.departure.schedule_time,scheduledArrivalTime:t.content.stops[e.range.from+i+1].arrival.schedule_time}}))}})),walks:[]}):t.$mapService.mapSetDetailFilter({interchangeStations:t.$store.state.mapConnections[t.index].stations,trains:t.$store.state.mapConnections[t.index].trains,walks:t.$store.state.mapConnections[t.index].walks}),t.$mapService.mapFitBounds({mapId:"map",coords:t.content.stops.map((function(t){return[t.station.pos.lat,t.station.pos.lng]}))}),clearInterval(a))}))},trip:function(){this.getData()},index:function(){this.getData()}},created:function(){this.getData()},unmounted:function(){this.$mapService.mapSetDetailFilter(null)},methods:{getTimeString:function(t){return this.$ds.getTimeString(1e3*t)},sendRequest:function(){var t=this;void 0!==this.trip&&this.$postService.getTripResponce(this.trip).then((function(e){void 0!==t.trip&&e.trips.length>0&&e.trips[0].id.station_id===t.trip.station_id&&(t.content=e)})).catch((function(){return t.$router.back()}))},getStopsForTransport:function(t){var e=this.content.transports.map((function(t){return t.move})).indexOf(t),n=e===this.content.transports.length-1?t:this.content.transports[e+1].move,i=(!("mumo_id"in n)||-1!==n.mumo_id)&&(!("mumo_id"in t)||-1!==t.mumo_id);return this.content.stops.slice(t.range.from,t.range.to+(i?1:0))},determineStartStationNameForCustomMovement:function(t){var e=this.getStopsForTransport(t)[0].station.name,n=this.transports.map((function(t){return t.move}));return 0===n.indexOf(t)&&void 0!==this.startStationName?e=this.startStationName:(1===n.indexOf(t)&&"mumo_type"in n[0]&&"car"===n[0].mumo_type||n.indexOf(t)===n.length-1&&"mumo_type"in t&&"car"===t.mumo_type)&&(e=this.$t.parking),e},determineEndStationNameForCustomMovement:function(t){var e=this.getStopsForTransport(t),n=e[e.length-1].station.name,i=this.transports.map((function(t){return t.move})),s=i[i.length-1];return i.indexOf(t)===i.length-1&&void 0!==this.endStationName?n=this.endStationName:(i.indexOf(t)===i.length-2&&"mumo_type"in s&&"car"===s.mumo_type||0===i.indexOf(t)&&"mumo_type"in t&&"car"===t.mumo_type)&&(n=this.$t.parking),n},getData:function(){void 0!==this.index&&this.$store.state.connections.length>0&&this.index<this.$store.state.connections.length&&this.index>=0?(this.content=this.$store.state.connections[this.index],this.$store.state.areConnectionsDropped||(this.startStationName=this.$store.state.startInput.name,this.endStationName=this.$store.state.destinationInput.name)):void 0!==this.trip?this.sendRequest():this.$router.push({name:"ConnectionSearch"})},getTripForTransport:function(t){if(!this.isTripView)return this.content.trips.filter((function(e){return e.id.line_id===t.line_id}))[0].id}}});const cs=pe()(rs,[["render",ri]]);var ls=cs,us={class:"station-events"},ds={class:"header"},ps=Object(i["h"])("i",{class:"icon"},"arrow_back",-1),hs=[ps],ms={class:"station"},bs={class:"event-type-picker"},Os=Object(i["h"])("input",{type:"radio",id:"station-departures",name:"station-event-types",checked:""},null,-1),vs=Object(i["h"])("input",{type:"radio",id:"station-arrivals",name:"station-event-types"},null,-1),gs={class:"events"},js={key:1,class:""},fs={key:2,class:"error"},Ss={key:0,class:"no-results"},ys=Object(i["h"])("div",{class:"date-header divider"},null,-1),Ts={class:"msg"},Ds=Object(i["h"])("div",{class:"divider footer"},null,-1),ks={key:1,class:"event-list"},ws={class:"date-header divider"},Cs={key:0,class:"station-event"},$s={class:"event-time"},Fs={class:"event-train"},Is=["title"],xs=Object(i["h"])("i",{class:"icon"},"arrow_forward",-1),Ms=Object(i["h"])("div",{class:"event-track"},null,-1),_s={key:1,class:"date-header divider"},Ls={key:2,class:""},Es=Object(i["h"])("div",{class:"divider footer"},null,-1),Ns={key:2,class:"error"};function Rs(t,e,n,s,a,o){var r=Object(i["C"])("LoadingBar"),c=Object(i["C"])("TransportTypeBox");return Object(i["u"])(),Object(i["g"])("div",us,[Object(i["h"])("div",ds,[Object(i["h"])("button",{class:"back",onClick:e[0]||(e[0]=function(e){return t.$router.go(-1)})},hs),Object(i["h"])("div",ms,Object(i["F"])(t.station.name),1),Object(i["h"])("div",bs,[Object(i["h"])("div",null,[Os,Object(i["h"])("label",{for:"station-departures",onClick:e[1]||(e[1]=function(e){return t.getDepartures(!0)})},Object(i["F"])(t.$t.departure),1)]),Object(i["h"])("div",null,[vs,Object(i["h"])("label",{for:"station-arrivals",onClick:e[2]||(e[2]=function(e){return t.getDepartures(!1)})},Object(i["F"])(t.$t.arrival),1)])])]),Object(i["h"])("div",gs,[t.loadingStates.content!==t.LoadingState.Loaded?(Object(i["u"])(),Object(i["e"])(r,{key:0,isButton:!1})):(Object(i["u"])(),Object(i["g"])("div",js,[Object(i["h"])("div",{class:Object(i["p"])(["extend-search-interval search-before",t.isUpperEnd?t.isEmptyTimetable?"error":"disabled":""])},[t.loadingStates.upperButton===t.LoadingState.Loaded?Object(i["O"])((Object(i["u"])(),Object(i["g"])("button",{key:0,onClick:e[3]||(e[3]=function(e){return t.isEmptyTimetable?t.errorScreen(t.TimeGap.Earlier):t.changeTimeGap(t.TimeGap.Earlier)})},Object(i["F"])(t.$t.earlier),513)),[[i["L"],!t.isUpperEnd]]):(Object(i["u"])(),Object(i["e"])(r,{key:1,isButton:!0})),t.isEmptyTimetable?(Object(i["u"])(),Object(i["g"])("div",fs,[Object(i["O"])(Object(i["h"])("div",{class:""},Object(i["F"])(t.$t.noInTimetable),513),[[i["L"],t.isUpperEnd]])])):Object(i["f"])("",!0)],2),t.isEmptyTimetable?(Object(i["u"])(),Object(i["g"])("div",Ss,[ys,Object(i["h"])("div",Ts,Object(i["F"])(t.isDeparture?t.$t.noDepartures:t.$t.noArrivals),1),Ds])):(Object(i["u"])(),Object(i["g"])("div",ks,[Object(i["h"])("div",ws,[Object(i["h"])("span",null,Object(i["F"])(t.getDateString(t.filteredEvents[0].event.time)),1)]),(Object(i["u"])(!0),Object(i["g"])(i["a"],null,Object(i["A"])(t.filteredEvents,(function(e,n){return Object(i["u"])(),Object(i["g"])("div",{key:e.trips[0].id},[e?(Object(i["u"])(),Object(i["g"])("div",Cs,[Object(i["h"])("div",$s,Object(i["F"])(t.getTimeString(e.event.time)),1),Object(i["h"])("div",Fs,[Object(i["h"])("span",null,[Object(i["j"])(c,{transport:e.trips[0].transport,trip:e.trips[0].id},null,8,["transport","trip"])])]),Object(i["h"])("div",{class:"event-direction",title:e.trips[0].transport.direction},[xs,Object(i["i"])(" "+Object(i["F"])(e.trips[0].transport.direction),1)],8,Is),Ms])):Object(i["f"])("",!0),t.separators.includes(n+1)?(Object(i["u"])(),Object(i["g"])("div",_s,[Object(i["h"])("span",null,Object(i["F"])(t.getDateString(t.filteredEvents[n+1].event.time)),1)])):(Object(i["u"])(),Object(i["g"])("div",Ls))])})),128)),Es])),Object(i["h"])("div",{class:Object(i["p"])(["extend-search-interval search-after",t.isBottomEnd?t.isEmptyTimetable?"error":"disabled":""])},[t.loadingStates.lowerButton===t.LoadingState.Loaded?Object(i["O"])((Object(i["u"])(),Object(i["g"])("button",{key:0,onClick:e[4]||(e[4]=function(e){return t.isEmptyTimetable?t.errorScreen(t.TimeGap.Later):t.changeTimeGap(t.TimeGap.Later)})},Object(i["F"])(t.$t.later),513)),[[i["L"],!t.isBottomEnd]]):(Object(i["u"])(),Object(i["e"])(r,{key:1,isButton:!0})),t.isEmptyTimetable?(Object(i["u"])(),Object(i["g"])("div",Ns,[Object(i["O"])(Object(i["h"])("div",{class:""},Object(i["F"])(t.$t.noInTimetable),513),[[i["L"],t.isBottomEnd]])])):Object(i["f"])("",!0)],2)]))])])}var Bs,Ps=Object(i["k"])({name:"StationTimetable",components:{TransportTypeBox:Pn,LoadingBar:dn},props:{stationGuess:{type:Object,required:!0},tripIdGuess:{type:Object,required:!1}},data:function(){return{departures:[],station:{},filteredEvents:[],date:0,isDeparture:!0,isUpperEnd:!1,isBottomEnd:!1,separators:[],isEmptyTimetable:!1,loadingStates:{content:rn.NothingToShow,upperButton:rn.Loaded,lowerButton:rn.Loaded},LoadingState:rn,TimeGap:Bs}},watch:{stationGuess:function(t){this.departures=[],this.isUpperEnd=!1,this.isBottomEnd=!1,this.isEmptyTimetable=!1,this.loadingStates.content=rn.Loading,this.isDeparture=!0,this.date=this.$ds.dateTimeInSeconds,this.getInfo(t,this.isDeparture)}},created:function(){this.tripIdGuess?this.tripIdGuess&&(this.date=this.tripIdGuess.time):this.date=this.$ds.dateTimeInSeconds,this.getInfo(this.stationGuess,this.isDeparture)},methods:{getTimeString:function(t){return this.$ds.getTimeString(1e3*t)},getDateString:function(t){return this.$ds.getDateString(1e3*t)},getDepartures:function(t){t&&this.departures?this.filteredEvents=this.departures.filter((function(t){return"DEP"===t.type})):this.filteredEvents=this.departures.filter((function(t){return"ARR"===t.type})),this.getSeparator(this.filteredEvents),this.isDeparture=t},changeTimeGap:function(t){t===Bs.Earlier?this.date=this.departures[0].event.time:t===Bs.Later&&(this.date=this.departures[this.departures.length-1].event.time),this.getInfo(this.stationGuess,this.isDeparture,t===Bs.Earlier)},getSeparator:function(t){this.separators=[];for(var e=1;e<t.length;e++){var n=new Date(1e3*t[e-1].event.time),i=new Date(1e3*t[e].event.time);(n.getDate()<i.getDate()||n.getMonth()<i.getMonth()||n.getFullYear()<i.getFullYear())&&this.separators.push(e)}},errorScreen:function(t){t===Bs.Earlier?this.isUpperEnd=!0:t===Bs.Later&&(this.isBottomEnd=!0)},getInfo:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!0===i?this.loadingStates.upperButton=rn.Loading:!1===i&&(this.loadingStates.lowerButton=rn.Loading),this.$postService.getDeparturesResponse(t.id,!0,null===i?"BOTH":i?"EARLIER":"LATER",20,this.date).then((function(t){if(n.$mapService.mapFlyTo({mapId:"map",lng:t.station.pos.lng,lat:t.station.pos.lat,animate:!0}),null===i?n.departures=t.events:i?i&&(n.departures=t.events.concat(n.departures)):n.departures=n.departures.concat(t.events),0===t.events.length){if(0===n.departures.length)throw n.station=t.station,new Error;!1===i?n.isBottomEnd=!0:!0===i&&(n.isUpperEnd=!0)}n.station=t.station,n.getDepartures(e),n.loadingStates.content=rn.Loaded,n.loadingStates.upperButton=rn.Loaded,n.loadingStates.lowerButton=rn.Loaded})).catch((function(){n.isEmptyTimetable=!0,n.loadingStates.content=rn.Loaded,n.loadingStates.upperButton=rn.Loaded,n.loadingStates.lowerButton=rn.Loaded}))}}});(function(t){t[t["Earlier"]=1]="Earlier",t[t["Later"]=2]="Later"})(Bs||(Bs={}));const Vs=pe()(Ps,[["render",Rs]]);var Hs=Vs;function As(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("div")}var Gs=Object(i["k"])({name:"PageNotFound"});const qs=pe()(Gs,[["render",As]]);var Ws,Us=qs,zs=["TrainSearch","StationTimetable","Trip","StationTimeTableFromTrainSearch"],Ys=[{path:"/:locale?/",name:"ConnectionSearch",components:{overlay:bn}},{path:"/:locale?/trips",name:"TrainSearch",components:{subOverlay:An}},{path:"/:locale?/station/:id",name:"StationTimetable",components:{subOverlay:Hs},props:{subOverlay:function(t){return{stationGuess:{id:t.params.id}}}}},{path:"/:locale?/trip/:station_id/:train_nr/:time/:target_station_id/:target_time/:line_id?",name:"Trip",components:{subOverlay:ls},props:{subOverlay:function(t){return{trip:{station_id:t.params.station_id,train_nr:t.params.train_nr,time:t.params.time,target_station_id:t.params.target_station_id,target_time:t.params.target_time,line_id:t.params.line_id}}}}},{path:"/:locale?/connection/:index",name:"Connection",components:{overlay:ls},props:{overlay:function(t){return{index:Number.parseInt(t.params.index)}}}},{path:"/:locale?/station/:id/:time",name:"StationTimeTableFromTrainSearch",components:{subOverlay:Hs},props:{subOverlay:function(t){return{stationGuess:{name:t.params.name,id:t.params.id},tripIdGuess:{time:t.params.time}}}}},{path:"/:pathMatch(.*)",name:"PageNotFound",component:Us}],Ks=Object(k["b"])({history:Object(k["c"])("/"),routes:Ys});Ks.beforeEach((function(t,e,n){var i=!1,s=!1;if(t.params.locale!==Ws.currentLocale)if(Ws.availableLocales.includes(t.params.locale))Ws.changeLocale(t.params.locale);else{var a=Ks.resolve("/".concat(Ws.currentLocale)+t.path);"PageNotFound"!==a.name?(n({path:a.fullPath,replace:!0}),i=!0):s=!0}i||(!t.name||s?n({path:e.fullPath,replace:!0}):n())}));var Xs=function(t){return Ws=t,Ks},Js=Object(i["k"])({name:"LeftMenu",components:{RouterView:k["a"]},emits:["searchHidden"],data:function(){return{isOverlayHidden:!1,isSubOverlayHidden:!0}},computed:{isTrainSubOverlayOpened:function(){return"TrainSearch"===this.$route.name}},watch:{$route:function(t){t.name&&(zs.includes(t.name.toString())?(this.isSubOverlayHidden=!1,this.isOverlayHidden=!1):this.isSubOverlayHidden=!0)},isOverlayHidden:function(){this.$emit("searchHidden",this.isOverlayHidden)}},methods:{openCloseTrainSearch:function(){this.isTrainSubOverlayOpened?this.$router.push("/"):this.$router.push("/trips")}}});const Zs=pe()(Js,[["render",D]]);var Qs=Zs,ta={class:"map-container"},ea=Object(i["h"])("div",{id:"map-background",class:"mapboxgl-map"},null,-1),na=Object(i["h"])("div",{id:"map-foreground",class:"mapboxgl-map"},null,-1),ia={key:0,class:"station-name"},sa={class:"transport-name"},aa={class:"departure"},oa={class:"station"},ra={class:"time no-delay-infos"},ca={class:"schedule"},la={class:"arrival"},ua={class:"station"},da={class:"time no-delay-infos"},pa={class:"schedule"},ha={class:"map-bottom-overlay"},ma={class:"sim-time-overlay"},ba=Object(i["h"])("div",{class:"permalink",title:"Permalink"},[Object(i["h"])("a",{href:"#/railviz/50.65753/9.479082/6/0/0/1644346924"},[Object(i["h"])("i",{class:"icon"},"link")])],-1),Oa=Object(i["h"])("i",{class:"icon"},"warning",-1),va=[Oa],ga={class:"train-color-picker-overlay"},ja=["value"],fa={for:"train-color-picker-none"},Sa=["value"],ya={for:"train-color-picker-class"},Ta=["value"],Da={for:"train-color-picker-delay"};function ka(t,e,n,s,a,o){return Object(i["u"])(),Object(i["g"])("div",ta,[ea,na,Object(i["h"])("div",{class:Object(i["p"])(["railviz-tooltip",t.tooltipState===t.TooltipState.Station?"station":t.tooltipState===t.TooltipState.Train?"train":"",t.tooltipState?"visible":"hidden"]),style:Object(i["q"])("top: ".concat(t.tooltipPosition.y,"px; left: ").concat(t.tooltipPosition.x,"px;"))},[t.tooltipState===t.TooltipState.Station?(Object(i["u"])(),Object(i["g"])("div",ia,Object(i["F"])(t.tooltipStationName),1)):t.tooltipState===t.TooltipState.Train?(Object(i["u"])(),Object(i["g"])(i["a"],{key:1},[Object(i["h"])("div",sa,Object(i["F"])(t.tooltipTransportInfo.name),1),Object(i["h"])("div",aa,[Object(i["h"])("span",oa,Object(i["F"])(t.tooltipTransportInfo.departureStation),1),Object(i["h"])("div",ra,[Object(i["h"])("span",ca,Object(i["F"])(t.tooltipTransportInfo.departureTime),1)])]),Object(i["h"])("div",la,[Object(i["h"])("span",ua,Object(i["F"])(t.tooltipTransportInfo.arrivalStation),1),Object(i["h"])("div",da,[Object(i["h"])("span",pa,Object(i["F"])(t.tooltipTransportInfo.arrivalTime),1)])])],64)):Object(i["f"])("",!0)],6),Object(i["h"])("div",ha,[Object(i["h"])("div",ma,[ba,Object(i["O"])(Object(i["h"])("button",{class:"sim-icon",title:"Simulationsmodus aktiv",onClick:e[0]||(e[0]=function(e){return t.$emit("openSimWindow")})},va,512),[[i["L"],t.isSimulationEnabled]]),Object(i["h"])("button",{class:"time",id:"sim-time-overlay",onClick:e[1]||(e[1]=function(e){return t.$emit("openSimWindow")})},Object(i["F"])(t.$ds.getTimeString(void 0,!0)),1)]),Object(i["h"])("div",ga,[Object(i["h"])("div",null,[Object(i["O"])(Object(i["h"])("input",{type:"radio",id:"train-color-picker-none",value:t.RadioState.None,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.radioState=e})},null,8,ja),[[i["I"],t.radioState]]),Object(i["h"])("label",fa,Object(i["F"])(t.$t.noTrains),1)]),Object(i["h"])("div",null,[Object(i["O"])(Object(i["h"])("input",{type:"radio",id:"train-color-picker-class",value:t.RadioState.Class,"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.radioState=e})},null,8,Sa),[[i["I"],t.radioState]]),Object(i["h"])("label",ya,Object(i["F"])(t.$t.byCategory),1)]),Object(i["h"])("div",null,[Object(i["O"])(Object(i["h"])("input",{type:"radio",id:"train-color-picker-delay",value:t.RadioState.Delay,"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.radioState=e})},null,8,Ta),[[i["I"],t.radioState]]),Object(i["h"])("label",Da,Object(i["F"])(t.$t.byDelay),1)])])]),Object(i["h"])("div",{class:Object(i["p"])(["railviz-contextmenu",t.contextMenuVisible?"visible":"hidden"]),style:Object(i["q"])("top: ".concat(t.mapClickInfo.mouseY,"px; left: ").concat(t.mapClickInfo.mouseX,"px;"))},[Object(i["h"])("div",{class:"item",onClick:e[5]||(e[5]=function(){return t.setStart&&t.setStart.apply(t,arguments)})},Object(i["F"])(t.$t.routeFromHere),1),Object(i["h"])("div",{class:"item",onClick:e[6]||(e[6]=function(){return t.setDestination&&t.setDestination.apply(t,arguments)})},Object(i["F"])(t.$t.routeHere),1)],6)])}var wa,Ca,$a=Object(i["k"])({name:"Map",props:{isSimulationEnabled:Boolean},emits:["openSimWindow"],data:function(){return{TooltipState:wa,tooltipState:wa.Hidden,tooltipPosition:{x:0,y:0},tooltipStationName:"",tooltipTransportInfo:{},RadioState:Ca,radioState:Ca.Class,mapClickInfo:{},contextMenuVisible:!1}},watch:{radioState:function(){this.$mapService.mapShowTrains(this.radioState!==Ca.None),this.radioState!==Ca.None&&this.$mapService.mapUseTrainClassColors(this.radioState===Ca.Class)}},created:function(){this.$mapService.mapSetTooltipDelegates.push(this.mapTrainOrStationHovered),this.$mapService.mapShowContextMenu=this.mapShowContextMenu,this.$mapService.mapCloseContextMenu=this.mapCloseContextMenu},methods:{mapTrainOrStationHovered:function(t){this.tooltipState=t.hoveredTrain?wa.Train:t.hoveredStation?wa.Station:wa.Hidden,this.tooltipState!==wa.Hidden&&(this.tooltipPosition={x:t.mouseX-120,y:t.mouseY+20},t.hoveredTrain?this.tooltipTransportInfo={name:t.hoveredTrain.names[0],departureStation:t.hoveredTrain.departureStation,departureTime:this.$ds.getTimeString(t.hoveredTrain.departureTime),arrivalStation:t.hoveredTrain.arrivalStation,arrivalTime:this.$ds.getTimeString(t.hoveredTrain.arrivalTime)}:t.hoveredStation&&(this.tooltipStationName=t.hoveredStation))},mapShowContextMenu:function(t){this.contextMenuVisible=!0,this.mapClickInfo=t},mapCloseContextMenu:function(){this.contextMenuVisible=!1},setStart:function(){this.$store.state.setStart({lat:this.mapClickInfo.lat,lng:this.mapClickInfo.lng}),this.contextMenuVisible=!1},setDestination:function(){this.$store.state.setDestination({lat:this.mapClickInfo.lat,lng:this.mapClickInfo.lng}),this.contextMenuVisible=!1}}});(function(t){t[t["Hidden"]=0]="Hidden",t[t["Train"]=1]="Train",t[t["Station"]=2]="Station"})(wa||(wa={})),function(t){t[t["None"]=0]="None",t[t["Class"]=1]="Class",t[t["Delay"]=2]="Delay"}(Ca||(Ca={}));const Fa=pe()($a,[["render",ka]]);var Ia=Fa,xa=Object(i["k"])({name:"DesktopMain",components:{LeftMenu:Qs,InputField:ve,Calendar:Ve,TimeInputField:qe,Map:Ia},data:function(){return{searchFieldHidden:!1,simWindowOpened:!1,isSimulationEnabled:!0,cachedSimulationTime:0}},methods:{isStation:function(t){return"id"in t},goToTimetable:function(t){if(this.isStation(t)){var e=t;this.$router.push({name:"StationTimetable",params:e})}else this.$mapService.mapFlyTo({mapId:"map",lng:t.pos.lng,lat:t.pos.lat,animate:!0})},startDisableSimulation:function(){this.isSimulationEnabled?(this.cachedSimulationTime=this.$ds.date.setSeconds(0).valueOf(),this.$ds.dateTime=(new Date).valueOf()):this.$ds.dateTime=this.cachedSimulationTime,this.isSimulationEnabled=!this.isSimulationEnabled},changeDate:function(t){this.$ds.dateTime=this.formatSimTime(this.$ds.dateTime,t,"date")},changeTime:function(t){this.$ds.dateTime=this.formatSimTime(this.$ds.dateTime,t,"time")},formatSimTime:function(t,e,n){var i=new Date(t);if(i.setSeconds(0),"date"===n)i.setDate(e.getDate()),i.setMonth(e.getMonth()),i.setFullYear(e.getFullYear());else{if("time"!==n)return-1;i.setHours(e.getHours()),i.setMinutes(e.getMinutes())}return i.valueOf()}}});const Ma=pe()(xa,[["render",h]]);var _a=Ma,La=Object(i["k"])({name:"App",components:{DesktopMain:_a}});n("762f");const Ea=pe()(La,[["render",s]]);var Na=Ea,Ra=n("d4ec"),Ba=n("bee2"),Pa=n("1315"),Va=function(){function t(e,n){Object(Ra["a"])(this,t),this.timeFormat="HH:mm",this.dateFormat="dd.MM.yyyy",this.simulationTimeFormat="dd.MM.yyyy HH:mm:ss",this.mapSetTimeOffset=function(){},this._dateTime=e,this.intervalFromServer=n}return Object(Ba["a"])(t,[{key:"dateTime",get:function(){return this._dateTime},set:function(t){this._dateTime=t,this.mapSetTimeOffset(this._dateTime-Date.now().valueOf())}},{key:"dateTimePure",get:function(){return this._dateTime},set:function(t){this._dateTime=t}},{key:"date",get:function(){return new Date(this._dateTime)}},{key:"endDate",get:function(){return Pa["DateTime"].fromMillis(this.intervalFromServer.end).toFormat(this.dateFormat)}},{key:"dateTimeInSeconds",get:function(){return Math.floor(this._dateTime/1e3)}},{key:"getDateString",value:function(t){return t||(t=this._dateTime),Pa["DateTime"].fromMillis(t).toFormat(this.dateFormat)}},{key:"getTimeString",value:function(t,e){return t||(t=this._dateTime),e?Pa["DateTime"].fromMillis(t).toFormat(this.simulationTimeFormat):Pa["DateTime"].fromMillis(t).toFormat(this.timeFormat)}},{key:"parseDate",value:function(t){var e=Pa["DateTime"].fromFormat(t,this.dateFormat).toJSDate(),n=this.date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}},{key:"parseTime",value:function(t){var e=this.date,n=Pa["DateTime"].fromFormat(t,this.timeFormat).toJSDate();return new Date(e.getFullYear(),e.getMonth(),e.getDate(),n.getHours(),n.getMinutes())}}]),t}(),Ha=function(){function t(){Object(Ra["a"])(this,t),this.service={}}return Object(Ba["a"])(t,[{key:"install",value:function(t,e,n){var s=this;this.service=Object(i["y"])(new Va(e,n)),window.setTimeout((function(){s.service.dateTimePure+=1e3,window.setInterval((function(){return s.service.dateTimePure+=1e3}),1e3)}),1e3-(new Date).getMilliseconds()),t.config.globalProperties.$ds=this.service}}]),t}(),Aa=new Ha,Ga=n("1da1"),qa=(n("96cf"),n("bc3a")),Wa=n.n(qa),Ua={getStationGuessResponse:function(t,e){return Object(Ga["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={destination:{type:"Module",target:"/guesser"},content_type:"StationGuesserRequest",content:{input:t,guess_count:e}},n.next=3,Wa.a.post("https://europe.motis-project.de/",i);case 3:return n.abrupt("return",n.sent.data.content);case 4:case"end":return n.stop()}}),n)})))()},getAddressGuessResponse:function(t){return Object(Ga["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={destination:{type:"Module",target:"/address"},content_type:"AddressRequest",content:{input:t}},e.next=3,Wa.a.post("https://europe.motis-project.de/",n);case 3:return e.abrupt("return",e.sent.data.content);case 4:case"end":return e.stop()}}),e)})))()},getTripResponce:function(t){return Object(Ga["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={destination:{type:"Module",target:"/trip_to_connection"},content_type:"TripId",content:t},e.next=3,Wa.a.post("https://europe.motis-project.de/",n);case 3:return e.abrupt("return",e.sent.data.content);case 4:case"end":return e.stop()}}),e)})))()},getDeparturesResponse:function(t,e,n,i,s){return Object(Ga["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o={destination:{type:"Module",target:"/railviz/get_station"},content_type:"RailVizStationRequest",content:{by_schedule_time:e,direction:n,event_count:i,station_id:t,time:s}},a.next=3,Wa.a.post("https://europe.motis-project.de/",o);case 3:return a.abrupt("return",a.sent.data.content);case 4:case"end":return a.stop()}}),a)})))()},getTrainGuessResponse:function(t,e){return Object(Ga["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={destination:{target:"/railviz/get_trip_guesses",type:"Module"},content_type:"RailVizTripGuessRequest",content:{guess_count:20,time:t,train_num:e}},n.next=3,Wa.a.post("https://europe.motis-project.de/",i);case 3:return n.abrupt("return",n.sent.data.content);case 4:case"end":return n.stop()}}),n)})))()},getConnectionResponse:function(t){return Object(Ga["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={destination:{target:"/intermodal",type:"Module"},content_type:"IntermodalRoutingRequest",content:Object(Ht["a"])(Object(Ht["a"])({},t),{},{search_type:"Accessibility",search_dir:"Forward"})},e.next=3,Wa.a.post("https://europe.motis-project.de/",n);case 3:return e.abrupt("return",e.sent.data.content);case 4:case"end":return e.stop()}}),e)})))()},getInitialRequestScheduleInfo:function(){return Object(Ga["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={content:{},content_type:"MotisNoMessage",destination:{target:"/lookup/schedule_info",type:"Module"}},t.next=3,Wa.a.post("https://europe.motis-project.de/",e);case 3:return t.abrupt("return",t.sent.data.content);case 4:case"end":return t.stop()}}),t)})))()}},za={install:function(t){t.config.globalProperties.$postService=Ua}},Ya=(n("5319"),function(){function t(e){Object(Ra["a"])(this,t),this._t=Object(i["y"])({}),this.isLoaded=!1,this.availableLocales=["de-DE","en-US"],this.currentLocale="",this.updateMapLocale=function(){},this.changeLocale(e)}return Object(Ba["a"])(t,[{key:"t",get:function(){return this._t}},{key:"changeLocale",value:function(t){var e=this;this.currentLocale=t,this.loadLocale(t).then((function(t){Object.assign(e._t,t),e.isLoaded=!0,e.updateMapLocale(t)}))}},{key:"countTranslate",value:function(t,e){var n=this.t[t];if(!n||!Array.isArray(n))return"";var i=e>n.length-1?n.length-1:e;return this.format(n[i],e.toString())}},{key:"formatTranslate",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this.format.apply(this,[this.t[t]].concat(n))}},{key:"loadLocale",value:function(t){return Wa.a.get("locales/"+t+".json").then((function(t){return t.data})).then((function(t){return t}))}},{key:"format",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t?t.replace(/{(\d+)}/g,(function(t,e){return"undefined"!==typeof n[e]?n[e]:t})):""}}]),t}()),Ka=function(){function t(){Object(Ra["a"])(this,t),this.service=null}return Object(Ba["a"])(t,[{key:"install",value:function(t,e){this.createTranslationService(e),null!==this.service&&(t.config.globalProperties.$ts=this.service,t.config.globalProperties.$t=this.service.t)}},{key:"createTranslationService",value:function(t){null===this.service&&(this.service=Object(i["y"])(new Ya(t)))}}]),t}(),Xa=new Ka,Ja=n("5502"),Za=Object(Ja["a"])({state:{connections:[],startInput:{},destinationInput:{},setStart:function(){},setDestination:function(){},mapConnections:[]}}),Qa=(n("159b"),function(){}),to=function(){function t(){Object(Ra["a"])(this,t),this.created=!1,this.initialized=!1,this.mapInit=Qa,this.mapFlyTo=Qa,this.mapFitBounds=Qa,this.mapSetMarkers=Qa,this.mapSetDetailFilter=Qa,this.mapUpdateWalks=Qa,this.mapSetConnections=Qa,this.mapHighlightConnections=Qa,this.setTimeOffset=Qa,this.setPPRSearchOptions=Qa,this.mapSetLocale=Qa,this.mapUseTrainClassColors=Qa,this.mapShowTrains=Qa,this.mapShowContextMenu=Qa,this.handleRailVizError=Qa,this.clearRailVizError=Qa,this.showTripDetails=Qa,this.showStationDetails=Qa,this.mapUpdate=Qa,this.mapCloseContextMenu=Qa,this.mapSetTooltipDelegates=[]}return Object(Ba["a"])(t,[{key:"mapSetTooltip",value:function(t){this.mapSetTooltipDelegates.forEach((function(e){return e(t)}))}}]),t}(),eo=function(){function t(){Object(Ra["a"])(this,t),this.service={}}return Object(Ba["a"])(t,[{key:"install",value:function(t){this.service=new to,t.config.globalProperties.$mapService=this.service}}]),t}(),no=new eo,io=Object(i["d"])(Na);io.use(Za),io.use(Xa,"de-DE"),io.use(za),io.use(no);var so={begin:0,end:0};io.config.globalProperties.$postService.getInitialRequestScheduleInfo().then((function(t){so={begin:t.begin,end:t.end}}));var ao={},oo=setInterval((function(){if(null!==Xa.service&&Xa.service.isLoaded&&so.begin>0){ao=Xs(Xa.service),io.use(ao);var t=new Date(1e3*so.begin),e=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).valueOf();io.use(Aa,n,so),io.mount("#app"),clearInterval(oo),oo=-1}}),10);window.mapService=no.service;var ro=setInterval((function(){if(no.service.created&&-1===oo){no.service.mapInit("map");var t=setInterval((function(){no.service.initialized&&null!==Xa.service&&(no.service.mapSetLocale(Xa.service.t),Xa.service.updateMapLocale=no.service.mapSetLocale,no.service.setTimeOffset(Aa.service.dateTime-Date.now().valueOf()),Aa.service.mapSetTimeOffset=no.service.setTimeOffset,no.service.mapShowTrains(!0),no.service.showTripDetails=function(t){var e=t;ao.push({name:"Trip",params:e})},no.service.showStationDetails=function(t){ao.push({name:"StationTimetable",params:{id:t}})},clearInterval(t))}));clearInterval(ro)}}),10)}});
//# sourceMappingURL=app.7d600e14.js.map